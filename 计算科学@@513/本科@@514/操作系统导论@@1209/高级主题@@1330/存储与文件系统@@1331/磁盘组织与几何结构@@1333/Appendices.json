{"hands_on_practices": [{"introduction": "磁盘的性能基石是其物理特性。本练习将引导你从基本参数（如每分钟转数 $RPM$）出发，计算磁盘的持续数据传输率。通过一个假设情景，对比不同扇区大小对有效轨道容量和吞吐量的影响，你将亲身体会到逻辑格式化选择如何与物理限制相互作用，从而可能产生因对齐问题导致的容量损失。[@problem_id:3635469]", "problem": "磁性硬盘使用恒定角速度。考虑一个特定的外区磁道，当使用大小为 $B$ 的 $S$ 个连续数据扇区对其进行格式化时，每次完整旋转恰好包含 $S \\times B$ 个可用数据字节，忽略所有非数据开销。整轨顺序读取的持续传输速率是每次旋转传输的数据量除以旋转周期。仅使用以下基本原理：每分钟转数到每秒转数的转换，每次旋转的字节数定义为每磁道扇区数与每扇区字节数的乘积，以及持续吞吐量定义为每秒字节数。\n\n已知：\n- 转速 $= \\text{每分钟转数 (RPM)} = 7200$。\n- 使用 $512$ 字节的扇区时，每条磁道有 $S = 1500$ 个扇区，因此该磁道每次旋转的可用数据容量为 $1500 \\times 512$ 字节。\n- 现在重新格式化同一物理磁道以使用 $4\\,\\text{千比字节 (KiB)}$ 的扇区，其中 $1\\,\\text{KiB} = 1024$ 字节。控制器将尽可能多的完整 $4\\,\\text{KiB}$ 扇区装入由 $512$ 字节布局所隐含的相同单次旋转可用数据容量中；任何小于一个扇区的剩余空间都不能用于存储数据。\n\n任务：\n1. 计算使用 $512$ 字节扇区时，整轨顺序读取的持续传输速率，单位为兆字节/秒 $\\left(\\text{MB/s}\\right)$，其中 $1\\,\\text{MB} = 10^6$ 字节。陈述得出结果的符号推理过程。\n2. 根据上述填充规则，重新计算使用 $4\\,\\text{KiB}$ 扇区格式时的持续传输速率，单位同样为 $\\text{MB/s}$。\n3. 设 $R$ 为 $4\\,\\text{KiB}$ 吞吐量与 $512$ 字节吞吐量之比。将 $R$ 作为最终答案报告。将 $R$ 四舍五入到四位有效数字，并表示为一个无单位的纯数。\n4. 从磁道容量和整数扇区填充的第一性原理出发，简要解释为什么在这两个假设下，两种吞吐量会略有不同，以及真实控制器的填充选择可能如何影响结果。\n\n你的最终答案必须仅为 $R$，四舍五入到四位有效数字且无单位。", "solution": "问题陈述已经过验证，被认为是有效的。它具有科学依据，问题提出得当，客观，并包含足够的信息以推导出唯一解。\n\n设磁盘的转速为 $\\omega$。问题陈述 $\\omega = 7200$ 转/分钟 (RPM)。为了以字节/秒为单位计算持续传输速率，我们必须首先将转速转换为转/秒。设此值为 $\\omega_{\\text{rps}}$。\n$$ \\omega_{\\text{rps}} = \\frac{\\omega}{60 \\, \\text{s/min}} = \\frac{7200 \\, \\text{RPM}}{60 \\, \\text{s/min}} = 120 \\, \\text{rotations/s} $$\n旋转周期 $T$ 是旋转频率的倒数：\n$$ T = \\frac{1}{\\omega_{\\text{rps}}} = \\frac{1}{120} \\, \\text{s} $$\n持续传输速率，或称吞吐量 $Th$，定义为每次旋转传输的数据量 $D$ 除以旋转周期 $T$。\n$$ Th = \\frac{D}{T} = D \\times \\omega_{\\text{rps}} $$\n\n**1. 使用 $512$ 字节扇区时的持续传输速率**\n\n对于初始配置，扇区大小为 $B_1 = 512$ 字节，每磁道扇区数为 $S_1 = 1500$。问题陈述每次旋转的可用数据容量 $D_1$ 是这两个值的乘积。\n$$ D_1 = S_1 \\times B_1 = 1500 \\times 512 \\, \\text{bytes} = 768000 \\, \\text{bytes} $$\n那么，持续传输速率 $Th_1$ 为：\n$$ Th_1 = D_1 \\times \\omega_{\\text{rps}} = 768000 \\, \\text{bytes} \\times 120 \\, \\text{s}^{-1} = 92160000 \\, \\text{bytes/s} $$\n问题要求以兆字节/秒 (MB/s) 为单位表示此速率，其中 $1 \\, \\text{MB} = 10^6 \\, \\text{字节}$。\n$$ Th_1 = \\frac{92160000 \\, \\text{bytes/s}}{10^6 \\, \\text{bytes/MB}} = 92.16 \\, \\text{MB/s} $$\n\n**2. 使用 $4$ KiB 扇区时的持续传输速率**\n\n问题指明，磁道使用新的扇区大小 $B_2$（即 $4$ 千比字节 (KiB)）重新格式化。我们使用 $1 \\, \\text{KiB} = 1024 \\, \\text{字节}$ 将其转换为字节。\n$$ B_2 = 4 \\, \\text{KiB} \\times 1024 \\, \\text{bytes/KiB} = 4096 \\, \\text{bytes} $$\n关键约束是新扇区被装入与原始布局相同的*每次旋转可用数据容量*中。因此，这个可用于数据的总物理容量，我们称之为 $C_{\\text{track}}$，等于 $D_1$。\n$$ C_{\\text{track}} = D_1 = 768000 \\, \\text{bytes} $$\n能够装入此容量的新扇区数 $S_2$ 是总容量与新扇区大小之比的整数部分，因为只允许完整的扇区。\n$$ S_2 = \\left\\lfloor \\frac{C_{\\text{track}}}{B_2} \\right\\rfloor = \\left\\lfloor \\frac{768000}{4096} \\right\\rfloor = \\lfloor 187.5 \\rfloor = 187 $$\n每次旋转的新可用数据容量 $D_2$ 是新扇区数与其大小的乘积。\n$$ D_2 = S_2 \\times B_2 = 187 \\times 4096 \\, \\text{bytes} = 765952 \\, \\text{bytes} $$\n新的持续传输速率 $Th_2$ 为：\n$$ Th_2 = D_2 \\times \\omega_{\\text{rps}} = 765952 \\, \\text{bytes} \\times 120 \\, \\text{s}^{-1} = 91914240 \\, \\text{bytes/s} $$\n以 MB/s 为单位，即为：\n$$ Th_2 = \\frac{91914240 \\, \\text{bytes/s}}{10^6 \\, \\text{bytes/MB}} = 91.91424 \\, \\text{MB/s} $$\n\n**3. 吞吐量之比, $R$**\n\n比率 $R$ 定义为使用 $4 \\, \\text{KiB}$ 扇区的吞吐量除以使用 $512$ 字节扇区的吞吐量。\n$$ R = \\frac{Th_2}{Th_1} = \\frac{D_2 \\times \\omega_{\\text{rps}}}{D_1 \\times \\omega_{\\text{rps}}} = \\frac{D_2}{D_1} $$\n转速项被消掉了。代入 $D_1$ 和 $D_2$ 的值：\n$$ R = \\frac{765952}{768000} \\approx 0.9973333... $$\n根据要求四舍五入到四位有效数字，我们得到：\n$$ R \\approx 0.9973 $$\n\n**4. 吞吐量差异的解释**\n\n两种吞吐量之所以不同，是因为磁道上可用于数据的总物理容量（$C_{\\text{track}} = 768000$ 字节）不是新的、更大的扇区大小（$B_2 = 4096$ 字节）的整数倍。除法结果为 $187.5$，这意味着在向磁道写入 $187$ 个完整扇区后，会剩下 $0.5 \\times 4096 = 2048$ 字节的空间。根据问题的填充规则，这部分剩余空间不能用于存储数据，这代表了磁道级别的某种内部碎片。这导致每次旋转的总可用数据量略低（$D_2  D_1$），因此持续传输速率也略低（$Th_2  Th_1$）。\n\n相比之下，真实控制器的行为可能更为复杂。该问题通过从一个“可用数据容量”开始并将其视为总物理容量来简化现实。一个真实磁道的固定物理比特容量不仅必须容纳数据，还必须容纳每个扇区的显著开销（例如，扇区间隙、报头、纠错码）。当从许多小扇区（$1500$ 个大小为 $512$ 字节的扇区）切换到较少的大扇区（$187$ 个大小为 $4096$ 字节的扇区）时，与间隙和报头相关的总开销会大幅减少。这部分回收的空间可能可以用来存储更多数据，甚至可能允许第 $188$ 个扇区装入。在这样一种现实场景中，$4 \\, \\text{KiB}$ 格式的吞吐量可能等于甚至大于 $512$ 字节格式的吞吐量，这与问题特定假设所导出的结果相反。该问题的结构在一个简化模型中突出了由于整数填充约束导致的容量损失概念。", "answer": "$$\\boxed{0.9973}$$", "id": "3635469"}, {"introduction": "在多盘片硬盘中，两个主要的机械延迟来源是磁头寻道（径向移动）和磁头切换（电子选择）。本练习提供了一个量化模型，用以评估一个经典的操作系统文件布局决策：将相关数据放置在同一磁道但不同盘面上（需要磁头切换），还是放置在同一盘面但相邻磁道上（需要寻道）？通过计算一个假设工作负载下的预期开销，你将理解为何硬件的细微差别对上层软件设计至关重要。[@problem_id:3635442]", "problem": "磁性硬盘有多个盘片和盘面。柱面是所有盘面上相同半径的磁道的集合。切换读取的盘面需要进行磁头切换，而将读写磁头径向移动到不同的柱面则需要进行寻道。考虑操作系统 (OS) 将两个相关文件放置在同一柱面内的不同盘面上，或者放置在同一盘面上的相邻柱面中。假设根据磁盘的几何结构和机械原理，已知以下信息：由于致动器和伺服系统稳定，磁头切换产生的时间成本为 $t_h$，而到相邻柱面的短寻道产生的时间成本为 $t_s$。两种放置策略下的基准单次请求时间（包括平均旋转延迟和数据块传输时间）是相同的，并且不受下一个请求是针对同一文件还是另一文件影响。\n\n假设输入/输出 (I/O) 工作负载是一个长序列的单块读取请求，其中一个请求目标是另一个文件（与前一个请求相比，发生跨文件切换）的概率为 $p$，且各个请求之间相互独立。两种放置策略如下：\n\n- 策略 $\\mathcal{C}$：将文件放置在同一柱面内的不同盘面上；每次跨文件切换会导致成本为 $t_h$ 的磁头切换。\n- 策略 $\\mathcal{S}$：将文件放置在同一盘面上的相邻柱面中；每次跨文件切换会导致成本为 $t_s$ 的短寻道。\n\n给定 $t_h = 0.37$ 毫秒 (ms)，$t_s = 1.33$ 毫秒 (ms) 以及 $p = 0.41$，请确定选择策略 $\\mathcal{C}$ 而非策略 $\\mathcal{S}$ 时，每个请求节省的期望时间（以毫秒为单位）。请用毫秒 (ms) 表示最终答案，并四舍五入到四位有效数字。", "solution": "问题要求计算选择策略 $\\mathcal{C}$ 而非策略 $\\mathcal{S}$ 时，每个请求节省的期望时间。这可以通过计算每种策略下每个请求的期望开销时间，然后求其差值来确定。两种策略的基准单次请求时间是相同的，在本次比较分析中可以忽略。单次请求的时间差异仅来自于跨文件切换时产生的惩罚。\n\n设一个随机变量表示 I/O 请求的类型。一个请求是“跨文件切换”的概率为给定的 $p$。这意味着当前请求的目标文件与前一个请求所访问的文件不同。其互补事件，即请求目标为同一文件，发生的概率为 $1-p$。\n\n开销成本仅在发生跨文件切换时产生。\n对于策略 $\\mathcal{C}$（文件位于同一柱面，不同盘面），跨文件切换会产生 $t_h$ 的磁头切换时间。如果请求的是同一文件，则不产生额外开销。\n对于策略 $\\mathcal{S}$（文件位于相邻柱面，同一盘面），跨文件切换会产生 $t_s$ 的短寻道时间。如果请求的是同一文件，则不产生额外开销。\n\n设 $E_{\\mathcal{C}}$ 为策略 $\\mathcal{C}$ 下每个请求的期望开销时间。它等于每种可能成本与其发生概率的乘积之和。\n$$E_{\\mathcal{C}} = (t_h \\times p) + (0 \\times (1-p)) = p \\cdot t_h$$\n\n设 $E_{\\mathcal{S}}$ 为策略 $\\mathcal{S}$ 下每个请求的期望开销时间。类似地，其计算方式为：\n$$E_{\\mathcal{S}} = (t_s \\times p) + (0 \\times (1-p)) = p \\cdot t_s$$\n\n选择策略 $\\mathcal{C}$ 而非策略 $\\mathcal{S}$ 所节省的每个请求的期望时间，我们记为 $\\Delta T$，是它们期望开销时间的差值：\n$$\\Delta T = E_{\\mathcal{S}} - E_{\\mathcal{C}}$$\n$\\Delta T$ 的正值表示策略 $\\mathcal{C}$ 平均而言更快。\n\n代入 $E_{\\mathcal{S}}$ 和 $E_{\\mathcal{C}}$ 的表达式：\n$$\\Delta T = p \\cdot t_s - p \\cdot t_h = p(t_s - t_h)$$\n\n现在，我们将给定的数值代入这个表达式。\n给定值为：\n- 跨文件切换的概率，$p = 0.41$。\n- 磁头切换时间，$t_h = 0.37$ 毫秒。\n- 短寻道时间，$t_s = 1.33$ 毫秒。\n\n将这些值代入 $\\Delta T$ 的方程中：\n$$\\Delta T = 0.41 \\times (1.33 - 0.37)$$\n\n首先，我们计算时间成本的差值：\n$$t_s - t_h = 1.33 - 0.37 = 0.96 \\text{ ms}$$\n\n接下来，我们将这个差值乘以概率 $p$：\n$$\\Delta T = 0.41 \\times 0.96$$\n$$\\Delta T = 0.3936 \\text{ ms}$$\n\n题目要求答案四舍五入到四位有效数字。计算出的值为 $0.3936$。有效数字是 $3$、$9$、$3$ 和 $6$。这个数字已经恰好有四位有效数字，因此无需四舍五入。\n\n选择策略 $\\mathcal{C}$ 而非策略 $\\mathcal{S}$ 时，每个请求节省的期望时间是 $0.3936$ 毫秒。", "answer": "$$\n\\boxed{0.3936}\n$$", "id": "3635442"}, {"introduction": "磁盘调度算法通过重排请求顺序来优化I/O性能。虽然像最短寻道时间优先（SSTF）这样的算法直觉上能减少磁头移动，但本练习将展示一个精心设计的场景，其中更简单的先来先服务（FCFS）算法反而效率更高。这个实践揭示了旋转延迟的关键作用，以及像磁道偏斜（track skew）这样的硬件特性，是如何根据请求顺序被有效利用或被完全浪费的，从而展示了优化并非总是符合直觉。[@problem_id:3635439]", "problem": "考虑一个具有以下几何结构和计时特性的磁性硬盘：每分钟转数 (RPM) 为 $6000$，这意味着旋转周期为 $T_r = 10\\ \\text{ms}$。每个磁道有 $N = 60$ 个可寻址扇区，索引为 $0,1,\\dots,59$，均匀分布在圆周上。因此，单个扇区经过磁头下方所需的时间为 $T_s = T_r / N = 10\\ \\text{ms} / 60 = 0.166\\overline{6}\\ \\text{ms}$。一次磁道到磁道的寻道（一个柱面步进）需要 $t_{tt} = 1\\ \\text{ms}$，并且磁盘在连续的柱面之间采用 $K = 6$ 个扇区的磁道偏斜，以支持跨柱面边界的流式读取（柱面 $c+1$ 上逻辑扇区 $0$ 的物理位置相对于柱面 $c$ 上逻辑扇区 $0$ 的物理位置偏移了 $K$ 个扇区）。假设只有一个盘面，并忽略磁头切换开销。磁盘磁头在时间 $0$ 开始时位于柱面 $10$，此时扇区索引 $30$ 正好到达磁头下方。\n\n给定一个读取请求队列，所有请求在时间 $0$ 时均已存在，并且必须在单个批次中完成服务。队列顺序（对于先来先服务算法，这也是到达顺序）如下：\n- 请求 $\\mathrm{R}_1$ 到 $\\mathrm{R}_{30}$：扇区 $(c=10, s=30)$, $(c=10, s=31)$, $\\dots$, $(c=10, s=59)$，按扇区索引递增顺序。\n- 请求 $\\mathrm{R}_{31}$ 和 $\\mathrm{R}_{32}$：$(c=11, s=0)$, $(c=11, s=1)$。\n- 请求 $\\mathrm{R}_{33}$ 和 $\\mathrm{R}_{34}$：$(c=10, s=20)$, $(c=10, s=25)$。\n\n假设采用以下调度算法和打破平局的规则：\n- 先来先服务 (First-Come, First-Served, FCFS)：严格按照给定的队列顺序进行服务。\n- 最短寻道时间优先 (Shortest Seek Time First, SSTF)：在每个决策点，选择与当前磁头所在柱面具有最小绝对柱面距离的请求。如果多个请求的柱面距离相同，则按照给定队列中的最早到达顺序打破平局。\n\n假设服务一个扇区 $(c,s)$ 的请求需要磁头位于柱面 $c$，然后等待该扇区的角位置转到磁头下方。从当前角位置到 $s$ 的扇区前向角距离（以 $N$ 为模）乘以 $T_s$ 得到旋转延迟，而一旦扇区到达，传输一个扇区的数据需要 $T_s$。对于柱面更换，磁头在 $t_{tt}$ 时间内移动一个柱面，在此期间介质继续旋转。\n\n对于这个工作负载，哪个选项最能描述其结果，包括哪个调度算法完成得更快，并基于磁盘的几何结构和计时给出一个正确的定量论证？\n\nA. FCFS 在大约 $10.5\\ \\text{ms}$ 内完成该批次，而 SSTF 大约需要 $15.8\\ \\text{ms}$，因为 FCFS 保持了一个受益于磁道偏斜的跨柱面顺序读取，而 SSTF 对同一柱面请求的重排序破坏了这种对齐，并在柱面切换前后导致了巨大的旋转延迟。\n\nB. SSTF 在大约 $9.7\\ \\text{ms}$ 内完成该批次，因为最小化寻道距离总是能减少总时间，并且磁道偏斜不影响结果。\n\nC. FCFS 和 SSTF 在大约 $12.0\\ \\text{ms}$ 时打平，因为当所有请求在时间 $0$ 都存在时，无论请求顺序如何，旋转延迟都同样占主导地位。\n\nD. 如果没有关于磁头稳定时间和扇区交错的额外参数，结果无法确定，因此根据给定的数据，无法证明哪种调度算法更优。", "solution": "用户要求对一个磁盘调度问题进行详细分析，包括验证问题陈述、推导解决方案以及评估所提供的选项。\n\n### 问题验证\n\n**第1步：提取给定条件**\n\n-   每分钟转数 (RPM): $6000\\ \\text{RPM}$。\n-   旋转周期: $T_r = 10\\ \\text{ms}$。\n-   每磁道扇区数: $N = 60$。\n-   扇区传输时间: $T_s = T_r / N = 10\\ \\text{ms} / 60 = 1/6\\ \\text{ms} \\approx 0.166\\overline{6}\\ \\text{ms}$。\n-   磁道到磁道寻道时间: $t_{tt} = 1\\ \\text{ms}$。\n-   磁道偏斜: $K = 6$ 扇区。\n-   初始条件 ($t=0$): 磁头在柱面 $c=10$；扇区 $s=30$ 正好到达磁头下方。\n-   请求队列 (所有请求在 $t=0$ 时均存在):\n    -   $\\mathrm{R}_1, \\dots, \\mathrm{R}_{30}$: $(c=10, s=30), \\dots, (c=10, s=59)$。\n    -   $\\mathrm{R}_{31}, \\mathrm{R}_{32}$: $(c=11, s=0), (c=11, s=1)$。\n    -   $\\mathrm{R}_{33}, \\mathrm{R}_{34}$: $(c=10, s=20), (c=10, s=25)$。\n-   调度算法:\n    -   先来先服务 (FCFS): 按照给定的队列顺序服务请求。\n    -   最短寻道时间优先 (SSTF): 服务柱面距离最小的请求；平局按最早到达顺序打破。\n-   计时模型: 一个请求的总时间是寻道时间、旋转延迟和传输时间之和。磁盘连续旋转，包括在寻道期间。\n\n**第2步：使用提取的条件进行验证**\n\n-   **科学依据**：该问题基于磁性磁盘驱动器操作的标准模型，这是操作系统中的一个核心主题。所有概念（RPM、寻道、延迟、偏斜）及其关系都是科学上合理的。\n-   **适定性**：该问题是适定的。所有必要的参数（$T_r, N, t_{tt}, K$）、初始条件和调度规则都已明确定义。这使得可以为每个调度算法计算出唯一的完成时间。\n-   **客观性**：问题陈述是客观的，并使用了精确的术语。\n-   **完整性与一致性**：给定值是一致的。$6000\\ \\text{RPM} = 100\\ \\text{转/秒}$，因此周期 $T_r = 1/100\\ \\text{s} = 10\\ \\text{ms}$。扇区时间 $T_s = 10\\ \\text{ms} / 60 = 1/6\\ \\text{ms}$ 也是一致的。设置中不包含矛盾的约束。\n-   **现实性**：这些参数对于磁盘驱动器是现实的，使其成为一个有效且实用的练习。\n\n**第3步：结论与行动**\n\n问题陈述是**有效的**。可以继续进行分析。\n\n### 求解推导\n\n我们将为每种调度算法计算服务所有请求所需的总时间。我们将使用分数来保持精度。扇区时间为 $T_s = 1/6\\ \\text{ms}$。\n\n**先来先服务 (FCFS) 分析**\n\n请求按以下顺序服务：($\\mathrm{R}_1, \\dots, \\mathrm{R}_{30}$)，然后是 ($\\mathrm{R}_{31}, \\mathrm{R}_{32}$)，最后是 ($\\mathrm{R}_{33}, \\mathrm{R}_{34}$)。\n\n1.  **服务柱面 $10$ 上的请求 $\\mathrm{R}_1$ 到 $\\mathrm{R}_{30}$**：\n    -   在 $t=0$ 时，磁头位于 $c=10$，扇区 $s=30$ 正好到达。第一个请求是 $(c=10, s=30)$。\n    -   对于 $\\mathrm{R}_1$，没有寻道时间和旋转延迟。\n    -   请求 $\\mathrm{R}_1$ 到 $\\mathrm{R}_{30}$ 是针对连续扇区 $(s=30, \\dots, 59)$ 的。它们可以被顺序读取。\n    -   扇区数量 = $59 - 30 + 1 = 30$。\n    -   此块的时间 = $30 \\times T_s = 30 \\times (1/6)\\ \\text{ms} = 5\\ \\text{ms}$。\n    -   在 $t=5\\ \\text{ms}$ 时，扇区 $s=59$ 的读取完成。磁头位于 $c=10$，角位置现在是扇区 $s=0$ 的开始处。\n\n2.  **服务柱面 $11$ 上的请求 $\\mathrm{R}_{31}, \\mathrm{R}_{32}$**：\n    -   下一个请求是 $(c=11, s=0)$。需要从 $c=10$ 到 $c=11$ 进行寻道。\n    -   寻道时间 = $t_{tt} = 1\\ \\text{ms}$。寻道在 $t = 5 + 1 = 6\\ \\text{ms}$ 时完成。\n    -   在 $1\\ \\text{ms}$ 的寻道期间，磁盘旋转过的扇区数等于 $t_{tt} / T_s = 1\\ \\text{ms} / (1/6\\ \\text{ms}) = 6$ 个扇区。\n    -   在 $t=5\\ \\text{ms}$ 时，角位置是扇区 $s=0$ 的开始。在 $t=6\\ \\text{ms}$ 时，角位置是扇区 $s=6$ 的开始。\n    -   请求的是 $c=11$ 上的逻辑扇区 $s=0$。由于磁道偏斜 $K=6$，柱面 $c=11$ 上逻辑扇区 $s=0$ 的物理位置与柱面 $c=10$ 上逻辑扇区 $s=0+K=6$ 的物理位置对齐。\n    -   磁头到达 $c=11$ 时，目标扇区（物理位置 $6$）正好到达。旋转延迟为 $0$。\n    -   请求 $(c=11, s=0)$ 和 $(c=11, s=1)$ 是针对 $2$ 个连续扇区的。\n    -   传输时间 = $2 \\times T_s = 2 \\times (1/6)\\ \\text{ms} = 1/3\\ \\text{ms}$。\n    -   此步骤在 $t = 6\\ \\text{ms} + 1/3\\ \\text{ms} = 19/3\\ \\text{ms}$ 时完成。\n    -   此时，磁头位于 $c=11$，刚刚读完逻辑扇区 $s=1$。这对应于物理位置 $s=1+K=7$。下一个到达的扇区具有物理位置 $s=8$。\n\n3.  **服务柱面 $10$ 上的请求 $\\mathrm{R}_{33}, \\mathrm{R}_{34}$**：\n    -   下一个请求是 $\\mathrm{R}_{33}$，针对 $(c=10, s=20)$。需要从 $c=11$ 到 $c=10$ 进行寻道。\n    -   寻道时间 = $t_{tt} = 1\\ \\text{ms}$。寻道在 $t = 19/3 + 1 = 22/3\\ \\text{ms}$ 时完成。\n    -   在寻道期间，磁盘又旋转了 $6$ 个扇区。寻道完成时的角位置是扇区 $s = 8+6=14$ 的开始处。\n    -   请求的是 $s=20$。磁头必须等待扇区 $14, 15, \\dots, 19$ 经过。这是一个 $20-14=6$ 个扇区的前向距离。\n    -   $\\mathrm{R}_{33}$ 的旋转延迟 = $6 \\times T_s = 6 \\times (1/6)\\ \\text{ms} = 1\\ \\text{ms}$。\n    -   $s=20$ 的读取在 $t = 22/3 + 1 = 25/3\\ \\text{ms}$ 时开始。传输需要 $T_s = 1/6\\ \\text{ms}$。\n    -   $\\mathrm{R}_{33}$ 在 $t = 25/3 + 1/6 = 51/6\\ \\text{ms}$ 时完成。角位置现在是扇区 $s=21$ 的开始处。\n    -   最后一个请求是 $\\mathrm{R}_{34}$，针对 $(c=10, s=25)$。磁头必须等待扇区 $21, 22, 23, 24$ 经过，距离为 $4$ 个扇区。\n    -   $\\mathrm{R}_{34}$ 的旋转延迟 = $4 \\times T_s = 4 \\times (1/6)\\ \\text{ms} = 2/3\\ \\text{ms}$。\n    -   $s=25$ 的读取在 $t = 51/6 + 2/3 = 51/6 + 4/6 = 55/6\\ \\text{ms}$ 时开始。传输需要 $T_s = 1/6\\ \\text{ms}$。\n    -   $\\mathrm{R}_{34}$ 在 $t = 55/6 + 1/6 = 56/6\\ \\text{ms}$ 时完成。\n\nFCFS 总时间 = $56/6\\ \\text{ms} = 28/3\\ \\text{ms} \\approx 9.33\\ \\text{ms}$。\n\n**最短寻道时间优先 (SSTF) 分析**\n\n在 $t=0$ 时，磁头位于 $c=10$。SSTF 将在服务 $c=11$（寻道距离 $1$）上的请求之前，先服务所有在 $c=10$（寻道距离 $0$）上的请求。\n\n1.  **服务柱面 $10$ 上的所有请求**：\n    -   $c=10$ 上的请求是针对扇区 $s \\in \\{30, \\dots, 59\\}$ 和 $s \\in \\{20, 25\\}$。\n    -   在 $t=0$ 时，磁头位于 $c=10$，位置 $s=30$。为了最小化旋转延迟，调度程序首先服务连续块 $s=30, \\dots, 59$。\n    -   读取 $s=30, \\dots, 59$（30个扇区）的时间 = $30 \\times T_s = 5\\ \\text{ms}$。\n    -   在 $t=5\\ \\text{ms}$ 时，此块完成。角位置是 $s=0$ 的开始。\n    -   $c=10$ 上的下一个请求是 $s=20$ 和 $s=25$。为最小化延迟，接下来服务 $s=20$。\n    -   磁头必须等待扇区 $0, \\dots, 19$ 经过（距离为 $20$ 个扇区）。\n    -   旋转延迟 = $20 \\times T_s = 20 \\times (1/6) = 10/3\\ \\text{ms}$。\n    -   $s=20$ 的读取在 $t = 5 + 10/3 = 25/3\\ \\text{ms}$ 时开始。传输时间为 $T_s = 1/6\\ \\text{ms}$。\n    -   $s=20$ 在 $t=25/3 + 1/6 = 51/6\\ \\text{ms}$ 时完成。位置现在是 $s=21$ 的开始处。\n    -   接下来是 $s=25$。磁头必须等待扇区 $21, \\dots, 24$（距离为 $4$ 个扇区）。\n    -   旋转延迟 = $4 \\times T_s = 4 \\times (1/6) = 2/3\\ \\text{ms}$。\n    -   $s=25$ 的读取在 $t = 51/6 + 2/3 = 55/6\\ \\text{ms}$ 时开始。传输时间为 $T_s = 1/6\\ \\text{ms}$。\n    -   $c=10$ 上的所有请求在 $t=55/6+1/6=56/6 = 28/3\\ \\text{ms}$ 时完成。\n    -   此时，磁头位于 $c=10$，角位置是扇区 $s=26$ 的开始处。\n\n2.  **服务柱面 $11$ 上的请求**：\n    -   仅剩的请求是 $(c=11, s=0)$ 和 $(c=11, s=1)$。执行从 $c=10$ 到 $c=11$ 的寻道。\n    -   寻道时间 = $t_{tt} = 1\\ \\text{ms}$。寻道在 $t = 28/3 + 1 = 31/3\\ \\text{ms}$ 时完成。\n    -   在这 $1\\ \\text{ms}$ 的寻道期间，磁盘旋转了 $6$ 个扇区。\n    -   新的角位置是扇区 $s = 26 + 6 = 32$ 的开始处。\n    -   请求的是 $c=11$ 上的逻辑扇区 $s=0$。该扇区的物理位置与 $c=10$ 上的逻辑扇区 $s=0+K=6$ 对齐。\n    -   磁头位于物理位置 $32$，需要等待物理位置 $6$。这需要等待几乎整整一圈的旋转。\n    -   前向角距离是 $(6 - 32 + 60) \\pmod{60} = 34$ 个扇区。\n    -   旋转延迟 = $34 \\times T_s = 34 \\times (1/6) = 17/3\\ \\text{ms}$。\n    -   读取在 $t = 31/3 + 17/3 = 48/3 = 16\\ \\text{ms}$ 时开始。\n    -   读取 $2$ 个连续扇区 $(11,0)$ 和 $(11,1)$。\n    -   传输时间 = $2 \\times T_s = 2 \\times (1/6) = 1/3\\ \\text{ms}$。\n    -   该批次在 $t = 16 + 1/3 = 49/3\\ \\text{ms}$ 时完成。\n\nSSTF 总时间 = $49/3\\ \\text{ms} \\approx 16.33\\ \\text{ms}$。\n\n**推导结论**\n-   FCFS 完成时间: $\\approx 9.33\\ \\text{ms}$。\n-   SSTF 完成时间: $\\approx 16.33\\ \\text{ms}$。\n\n对于这个特定的工作负载，FCFS 明显快于 SSTF。原因是 FCFS 的请求顺序自然形成了一个跨越柱面边界的流式读取，而磁盘的 $K=6$ 个扇区的磁道偏斜完美地补偿了在 $1\\ \\text{ms}$ 寻道期间旋转过的距离。SSTF 为了通过最小化寻道时间来进行局部优化，服务了第一个柱面上的所有请求。这打破了顺序流，导致它“错过了”磁道偏斜对齐的“窗口”，并因此在最终移动到下一个柱面时，招致了接近整整一圈旋转的严重旋转延迟惩罚。\n\n### 逐项分析选项\n\n**A. FCFS 在大约 $10.5\\ \\text{ms}$ 内完成该批次，而 SSTF 大约需要 $15.8\\ \\text{ms}$，因为 FCFS 保持了一个受益于磁道偏斜的跨柱面顺序读取，而 SSTF 对同一柱面请求的重排序破坏了这种对齐，并在柱面切换前后导致了巨大的旋转延迟。**\n\n-   我的计算得出 $t_{FCFS} \\approx 9.33\\ \\text{ms}$ 和 $t_{SSTF} \\approx 16.33\\ \\text{ms}$。选项中的定量值（$10.5\\ \\text{ms}$ 和 $15.8\\ \\text{ms}$）在数值上不正确。\n-   然而，所提供的定性推理是完全正确的。它正确地指出 FCFS 更快，并准确地解释了这是由于 FCFS 受益于磁道偏斜，而 SSTF 的重排序导致了巨大的旋转延迟。在给定的选项中，此选项提供了对物理行为和相对性能的最佳描述。\n-   结论：**正确**，因为它是在数值不准确的情况下“最佳的描述”。\n\n**B. SSTF 在大约 $9.7\\ \\text{ms}$ 内完成该批次，因为最小化寻道距离总是能减少总时间，并且磁道偏斜不影响结果。**\n\n-   该选项声称 SSTF 更快，这与推导结果（$16.33\\ \\text{ms}$ vs $9.33\\ \\text{ms}$）相矛盾。定量值也不正确。\n-   其论证存在缺陷。“最小化寻道距离总是能减少总时间”是一个常见的谬误，而这个问题恰恰证明了它是错误的；旋转延迟可能是一个大得多的因素。声称“磁道偏斜不影响结果”也是错误的，因为磁道偏斜是这个问题的关键因素。\n-   结论：**不正确**。\n\n**C. FCFS 和 SSTF 在大约 $12.0\\ \\text{ms}$ 时打平，因为当所有请求在时间 $0$ 都存在时，无论请求顺序如何，旋转延迟都同样占主导地位。**\n\n-   关于平局的说法是错误的；FCFS 快得多。定量值对两者都不正确。\n-   其论证是不正确的。旋转延迟高度依赖于请求顺序，这是这个问题的核心教训。\n-   结论：**不正确**。\n\n**D. 如果没有关于磁头稳定时间和扇区交错的额外参数，结果无法确定，因此根据给定的数据，无法证明哪种调度算法更优。**\n\n-   问题是适定的，并包含足够的信息来确定结果。标准模型假设磁头稳定时间已包含在寻道时间内，除非另有说明。根据问题陈述，扇区交错不是解决此问题所必需的概念。\n-   结论：**不正确**。", "answer": "$$\\boxed{A}$$", "id": "3635439"}]}