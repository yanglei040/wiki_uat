{"hands_on_practices": [{"introduction": "掌握页着色技术的第一步是理解其底层机制。本练习将引导你直接根据系统参数和物理页帧号（PFN），计算一个页面的“颜色”，并进行重新映射。通过这个过程，你将加深对物理内存布局如何决定缓存索引这一核心概念的理解。[@problem_id:3666051]", "problem": "考虑一个使用页面着色技术来控制物理内存页面到缓存组映射的系统，该系统采用一个物理索引、组相联的中央处理器 (CPU) 缓存。该系统使用的页面大小为 $P=4\\text{KB}$，缓存行大小为 $L=64\\text{B}$。该缓存有 $S=4096$ 个组。一个应用程序分配了一个大小为 $A=3072\\text{B}$ 的数组，该数组完全位于一个大小为 $P$ 的单个页面内。该数组当前驻留在页帧号 (PFN) 为 $p=12345$ 的页面中。\n\n仅使用以下基本事实：\n- 物理索引缓存使用物理地址中紧邻 $\\log_{2}(L)$ 个行偏移位之上的 $\\log_{2}(S)$ 位作为组索引。\n- 大小为 $P$ 的页面提供 $\\log_{2}(P)$ 个页内偏移位，对于页面内的所有地址，这些位是固定的。\n- 页面着色将组索引空间划分为多个等价类（“颜色”），这些等价类对应于页内偏移位之上的组索引位，因此这些位的每个不同值定义一种颜色。当且仅当这些位匹配时，两个页面具有相同的颜色。\n\n首先，确定 PFN 为 $p$ 的页面的颜色。然后，为了优化数组的缓存布局，通过将其物理分配更改为能产生目标颜色的不同页帧号 $\\mathrm{PFN}'$，从而将数组重新映射到目标颜色 $t=13$。在所有能产生颜色 $t$ 的页帧号中，选择大于或等于 $p$ 的最小的 $\\mathrm{PFN}'$。\n\n请提供 $\\mathrm{PFN}'$ 的精确整数值。无需四舍五入。", "solution": "题目要求我们确定一个新的页帧号 (PFN)，记为 $\\mathrm{PFN}'$，用于重新映射一个数组以实现特定的缓存布局，这一过程也称为页面着色。我们已知初始 PFN $p$ 和目标颜色 $t$。解答必须是满足 $\\mathrm{PFN}' \\ge p$ 且对应页面颜色为 $t$ 的最小 $\\mathrm{PFN}'$。\n\n首先，我们必须理解物理地址的结构以及其比特位如何用于缓存索引和页面着色。\n\n页内偏移的位数由页面大小 $P$ 决定。\n给定 $P = 4 \\text{ KB} = 4 \\times 1024 \\text{ B} = 2^2 \\times 2^{10} \\text{ B} = 2^{12} \\text{ B}$。\n页内偏移位数为 $\\log_2(P) = \\log_2(2^{12}) = 12$。这些是物理地址的最低有效位，从第 0 位到第 11 位。一个物理地址 $\\mathrm{PA}$ 可以用其 PFN 和页内偏移来表示：$\\mathrm{PA} = (\\mathrm{PFN} \\times P) + \\text{offset_in_page} = (\\mathrm{PFN} \\ll 12) | \\text{offset_in_page}$。\n\n缓存行偏移的位数由缓存行大小 $L$ 决定。\n给定 $L = 64 \\text{ B} = 2^6 \\text{ B}$。\n行偏移位数为 $\\log_2(L) = \\log_2(2^6) = 6$。这些是物理地址的第 0 位到第 5 位。\n\n缓存组索引的位数由组数 $S$ 决定。\n给定 $S = 4096 = 2^{12}$ 个组。\n组索引位数为 $\\log_2(S) = \\log_2(2^{12}) = 12$。题目说明这些位紧邻行偏移位之上。因此，组索引由物理地址的第 6 位到第 17 位决定。\n\n题目根据“页内偏移之上”的组索引位来定义页面“颜色”。\n让我们来看一下物理地址的低位部分：\n- 页内偏移位：$\\{0, 1, 2, ..., 11\\}$\n- 组索引位：$\\{6, 7, 8, ..., 17\\}$\n\n“页内偏移之上”的组索引位是那些位索引大于最大页内偏移位索引（即 11）的位。这些是从第 12 位到第 17 位的位。这些位的数量是 $17 - 12 + 1 = 6$。这 6 个位构成了页面颜色。\n\n这些颜色位（物理地址的第 12 到 17 位）的值取决于 PFN。对于页帧内的任何地址，物理地址为 $\\mathrm{PA} = (\\mathrm{PFN} \\ll 12) | \\text{offset_in_page}$。物理地址的第 12 位及更高位仅由 PFN 决定。具体来说，物理地址的 $[12, 17]$ 位对应于 PFN 的 $[12-12, 17-12] = [0, 5]$ 位。\n因此，PFN 为 $p$ 的页面的颜色由 $p$ 的 6 个最低有效位决定。\n$$\n\\text{color}(p) = p \\pmod{2^6} = p \\pmod{64}\n$$\n\n题目首先要求计算初始 PFN 为 $p = 12345$ 的页面的颜色。\n$$\n\\text{color}(12345) = 12345 \\pmod{64}\n$$\n进行除法运算：$12345 = 192 \\times 64 + 57$。\n余数是 $57$。所以，初始页面的颜色是 $57$。\n\n接下来，我们必须找到满足两个条件的最小 PFN，即 $\\mathrm{PFN}'$：\n1. $\\mathrm{PFN}' \\ge p$，即 $\\mathrm{PFN}' \\ge 12345$。\n2. 页面具有目标颜色 $t = 13$。这意味着 $\\text{color}(\\mathrm{PFN}') = 13$。\n\n根据颜色的定义，第二个条件是：\n$$\n\\mathrm{PFN}' \\pmod{64} = 13\n$$\n这意味着 $\\mathrm{PFN}'$ 必须是 $k \\times 64 + 13$ 的形式，其中 $k$ 是一个非负整数。\n\n现在我们结合第一个条件：\n$$\nk \\times 64 + 13 \\ge 12345\n$$\n求解 $k$：\n$$\nk \\times 64 \\ge 12345 - 13\n$$\n$$\nk \\times 64 \\ge 12332\n$$\n$$\nk \\ge \\frac{12332}{64}\n$$\n$$\nk \\ge 192.6875\n$$\n因为 $k$ 必须是整数，所以 $k$ 的最小可能值是 $\\lceil 192.6875 \\rceil = 193$。\n\n最后，我们将 $k$ 的这个最小整数值代入 $\\mathrm{PFN}'$ 的表达式中：\n$$\n\\mathrm{PFN}' = 193 \\times 64 + 13\n$$\n$$\n\\mathrm{PFN}' = 12352 + 13\n$$\n$$\n\\mathrm{PFN}' = 12365\n$$\n这个值 $\\mathrm{PFN}' = 12365$，大于或等于 $p=12345$，并且对应于目标颜色 $13$。它是满足条件的最小值，因为我们使用了最小的可能整数 $k$。", "answer": "$$\\boxed{12365}$$", "id": "3666051"}, {"introduction": "理解了颜色的计算方法后，我们来探究其在实际性能优化中的应用。本练习模拟了一个多线程场景，你将分析特定的内存访问模式如何与页着色策略相互作用。通过为不同线程精心选择页面颜色，操作系统可以有效地隔离它们的缓存“足迹”，从而显著减少冲突未命中，提升系统吞吐量。[@problem_id:3666068]", "problem": "一个带有物理索引、物理标记的末级缓存 (LLC) 的单处理器被用来运行 $N$ 个并发线程，每个线程都以流式方式访问主存中的一个大数组。该 LLC 的容量为 $512$ KiB，相联度为 $8$，缓存行大小为 $L=64$ 字节。因此，组数由这些参数决定。虚拟内存页面大小为 $P=4096$ 字节。操作系统 (OS) 可以应用页面着色技术，其中颜色对应于物理页帧号的不同分配，这些分配会改变从物理地址派生出的缓存组索引。每个线程 $t \\in \\{0,1,\\dots,N-1\\}$ 从其私有数组中以 $s_{\\text{stride}} = L \\cdot k$ 字节（其中 $k=1024$）的恒定步长进行访问，每次访问读取一个缓存行。数组是页面对齐的，因此每个数组的起始虚拟地址的页内偏移量为 $0$，并且操作系统为给定线程数组所使用的所有页面分配单一的物理页面颜色。\n\n仅使用组相联缓存和页面着色的核心定义，完成以下任务：\n\n- 根据缓存参数和步长，推导单个线程的预测稳态缓存组访问模式。\n- 确定当数组页面对齐时，页面颜色的选择如何改变线程的初始缓存组索引。\n- 描述当操作系统以最大化不相交性为目的、对抗性地选择颜色时，有多少个线程可以拥有两两不相交的稳态缓存组足迹。\n\n假设 $N=24$。作为一个最终答案，报告在这台机器和这种访问模式下，通过最优页面着色可以使其缓存组足迹两两不相交的最大线程数。将您的最终答案表示为一个不带单位的整数。无需四舍五入。", "solution": "该问题要求分析多个线程的缓存利用率，同时考虑操作系统页面着色的影响。我们必须确定可以在末级缓存 (LLC) 中互不干扰地运行的最大线程数。这需要对缓存的几何结构、物理地址到缓存组的映射、页面着色的性质以及线程特定的内存访问模式进行系统性分析。\n\n首先，我们确定内存层次结构的参数。\nLLC 的容量为 $C = 512 \\text{ KiB} = 512 \\times 1024 \\text{ 字节} = 2^{19}$ 字节。\n相联度为 $A = 8$。\n缓存行大小为 $L = 64 \\text{ 字节} = 2^6$ 字节。\n在组相联缓存中，组数 $S$ 由公式 $S = \\frac{C}{A \\times L}$ 给出。\n代入给定值：\n$$S = \\frac{2^{19} \\text{ bytes}}{(8) \\times (64 \\text{ bytes})} = \\frac{2^{19}}{2^3 \\times 2^6} = \\frac{2^{19}}{2^9} = 2^{10} = 1024$$\n所以，LLC 有 $1024$ 个组，索引范围从 $0$ 到 $1023$。\n\n对于物理索引缓存，组索引由物理地址的一部分决定。物理地址被划分为标记、组索引和块内偏移。\n块内偏移的位数是 $b = \\log_2(L) = \\log_2(64) = 6$。\n组索引的位数是 $s = \\log_2(S) = \\log_2(1024) = 10$。\n组索引由物理地址的比特位 $[s+b-1 : b]$ 决定，即比特位 $[15:6]$。块内偏移对应于比特位 $[5:0]$。\n\n虚拟内存系统使用的页面大小为 $P = 4096 \\text{ 字节} = 2^{12}$ 字节。\n一个物理地址 $p_{addr}$ 可以表示为物理页号 ($PPN$) 和页内偏移的组合：$p_{addr} = PPN \\times P + \\text{page\\_offset}$。页内偏移由物理地址的最低 $p = \\log_2(P) = \\log_2(4096) = 12$ 位组成。\n\n页面着色通过控制 $PPN$ 中影响缓存组索引的比特位来工作。\n组索引位是 $[15:6]$。页内偏移位是 $[11:0]$。\n我们来分析重叠部分。组索引的低 $p-b = 12-6=6$ 位（即比特位 $[11:6]$）是页内偏移的一部分。组索引的高 $s-(p-b) = 10 - 6 = 4$ 位（即比特位 $[15:12]$）由 $PPN$ 决定。这 $4$ 位就是“颜色”位。因此，可用颜色的数量为 $N_{\\text{colors}} = 2^4 = 16$。\n\n我们来形式化地描述 $PPN$、页内偏移和组索引之间的关系。对于一个物理地址 $p_{addr}$，其组索引 $I$ 为：\n$$I(p_{addr}) = \\left\\lfloor \\frac{p_{addr}}{L} \\right\\rfloor \\pmod{S}$$\n代入 $p_{addr} = PPN \\times P + \\text{page\\_offset}$：\n$$I(p_{addr}) = \\left\\lfloor \\frac{PPN \\times P + \\text{page\\_offset}}{L} \\right\\rfloor \\pmod{S}$$\n由于整数除法对加法有分配律，我们可以写成：\n$$I(p_{addr}) = \\left( PPN \\cdot \\frac{P}{L} + \\left\\lfloor \\frac{\\text{page\\_offset}}{L} \\right\\rfloor \\right) \\pmod{S}$$\n我们有 $P/L = 4096/64 = 64$ 和 $S=1024$。\n$$I(p_{addr}) = \\left( PPN \\cdot 64 + \\left\\lfloor \\frac{\\text{page\\_offset}}{64} \\right\\rfloor \\right) \\pmod{1024}$$\n项 $(PPN \\cdot 64) \\pmod{1024}$ 取决于 $PPN$。因为 $\\gcd(64, 1024) = 64$，所以该项可以取的不同值的数量是 $1024/64 = 16$。这些值对应于 $16$ 种页面颜色。一个颜色 $c \\in \\{0, 1, \\dots, 15\\}$可以被定义为 $c = PPN \\pmod{16}$。来自颜色的组索引贡献是 $(c \\cdot 64) \\pmod{1024} = c \\cdot 64$。\n所以，$I(p_{addr}) = \\left(c \\cdot 64 + \\left\\lfloor \\frac{\\text{page\\_offset}}{64} \\right\\rfloor \\right) \\pmod{1024}$。\n\n现在我们分析单个线程的访问模式。每个线程以 $s_{\\text{stride}} = L \\cdot k = 64 \\cdot 1024 = 65536$ 字节的恒定步长访问其数组。\n注意到步长 $s_{\\text{stride}} = 2^{16}$ 字节，而页面大小为 $P=2^{12}$ 字节。步长是 $s_{\\text{stride}} = 16 \\times 2^{12} = 16 \\cdot P$。\n数组是页面对齐的，因此每个数组的起始虚拟地址的页内偏移量为 $0$。由于步长是页面大小的整数倍，因此线程的每一次后续访问也都会访问页内偏移量为 $0$ 的地址。\n\n对于所有访问，当 $\\text{page\\_offset}=0$ 时，线程的组索引计算将大大简化。假设一个线程被分配了单一颜色 $c_j$。对于该线程的每一次访问，其目标组索引 $I_j$ 将是：\n$$I_j = \\left(c_j \\cdot 64 + \\left\\lfloor \\frac{0}{64} \\right\\rfloor \\right) \\pmod{1024} = c_j \\cdot 64$$\n这表明，由于特定的步长，一个具有给定颜色 $c_j$ 的线程将*只*访问索引为 $c_j \\cdot 64$ 的单个缓存组。这样一个线程的稳态缓存组足迹是一个单元素集合：$\\{c_j \\cdot 64\\}$。\n\n最后的任务是确定可以拥有两两不相交的缓存组足迹的最大线程数。假设线程 $j$ 和线程 $k$ 分别被分配了颜色 $c_j$ 和 $c_k$。它们的缓存组足迹是 $\\{c_j \\cdot 64\\}$ 和 $\\{c_k \\cdot 64\\}$。要使这些足迹不相交，我们必须有：\n$$c_j \\cdot 64 \\neq c_k \\cdot 64$$\n这意味着 $c_j \\neq c_k$，因为 $c_j, c_k \\in \\{0, 1, \\dots, 15\\}$。\n为了最大化具有不相交足迹的线程数量，操作系统必须为每个线程分配一个唯一的颜色。可用唯一颜色的数量是 $16$。因此，操作系统最多可以确保 $16$ 个线程的缓存组足迹不相交。问题陈述了总共有 $N=24$ 个线程，但要求的是可能实现不相交性的最大线程数。这个数字受到资源的限制，即不同页面颜色的数量。\n\n可以拥有两两不相交的稳态缓存组足迹的最大线程数等于可用页面颜色的数量，即 $16$。", "answer": "$$\\boxed{16}$$", "id": "3666068"}, {"introduction": "在一个运行多个不同负载的系统中，如何分配有限的颜色资源以实现全局最优？本练习将引导你跳出简单的启发式方法，学习如何将颜色分配问题构建为一个严谨的整数线性规划（Integer Linear Program）模型。这种方法论让你能够系统性地找到最小化系统总缓存未命中率的最佳策略，是操作系统策略设计中的一种高级技巧。[@problem_id:3666023]", "problem": "考虑一个带有共享末级缓存 (LLC) 的多核系统。在组相联缓存中，物理内存帧通过索引位映射到缓存集。在页面着色技术中，操作系统将物理内存帧划分为称为“颜色”的等价类，其中相同颜色的帧映射到相同的缓存索引区域。当活动进程使用的许多帧映射到相同颜色时，会产生冲突未命中，因此仔细地在不同颜色间分配帧可以降低总未命中率。假设以下经过充分检验的事实和核心定义成立：通过索引位进行缓存集映射，颜色作为帧的等价类的概念，以及每种颜色有有限的帧容量可供分配。根据经验，对于给定的工作负载，放置在特定颜色中的进程的每页对未命中率的增量贡献可以用一个依赖于进程和颜色的常数系数来近似。\n\n现有 $I=3$ 个进程和 $K=3$ 种颜色。每个进程 $i \\in \\{1,2,3\\}$ 需要 $D_i$ 个物理帧，每种颜色 $k \\in \\{1,2,3\\}$ 最多能提供 $C_k$ 个帧。总未命中率被建模为所有进程和颜色的每页系数的总和。系统参数如下：\n- 需求：$D_1=5$，$D_2=4$，$D_3=3$。\n- 颜色容量：$C_1=5$，$C_2=3$，$C_3=4$。\n- 每页未命中系数 $\\alpha_{i,k}$ (进程 $i$ 的页面放置在颜色 $k$ 时的每页增量未命中率)，通过在稳态下进行性能分析获得：\n  - 对于进程1：$\\alpha_{1,1}=1$，$\\alpha_{1,2}=4$，$\\alpha_{1,3}=5$。\n  - 对于进程2：$\\alpha_{2,1}=3$，$\\alpha_{2,2}=1$，$\\alpha_{2,3}=2$。\n  - 对于进程3：$\\alpha_{3,1}=4$，$\\alpha_{3,2}=3$，$\\alpha_{3,3}=1$。\n\n从上述基本定义出发，引入整数决策变量 $x_{i,k}$，表示分配给颜色 $k$ 的进程 $i$ 的帧数。仅使用这些定义和给定参数，推导一个优化问题，该问题将帧分配给颜色以最小化总未命中率，同时满足每个进程都恰好获得其需求量且每种颜色的容量不被超过的约束条件。将问题表述为一个整数线性规划，其中 $x_{i,k}$ 的非负性和整数性由约束强制执行。然后，对给定实例精确求解此优化问题，并报告可实现的最小总未命中率，结果为一个实数。提供最终数字的精确值（不四舍五入），不带单位。", "solution": "问题在于确定将每个进程 $i$ 的帧分配给每个颜色 $k$ 的数量（由整数决策变量 $x_{i,k}$ 表示），以最小化总未命中率。这可以被表述为一个整数线性规划（ILP）。\n\n**1. 目标函数**\n总未命中率 $Z$ 是每次分配所贡献的未命中率之和。将进程 $i$ 的 $x_{i,k}$ 个帧分配给颜色 $k$ 的贡献是 $\\alpha_{i,k} x_{i,k}$。目标是最小化所有进程和颜色的总和：\n$$ \\text{Minimize } Z = \\sum_{i=1}^{3} \\sum_{k=1}^{3} \\alpha_{i,k} x_{i,k} $$\n\n**2. 约束条件**\n- **需求约束**：对于每个进程 $i$，分配给它的所有颜色的总帧数必须等于其需求 $D_i$。\n$$ \\sum_{k=1}^{3} x_{i,k} = D_i \\quad \\text{for } i \\in \\{1, 2, 3\\} $$\n- **容量约束**：对于每种颜色 $k$，从所有进程分配给它的总帧数不能超过其容量 $C_k$。\n$$ \\sum_{i=1}^{3} x_{i,k} \\le C_k \\quad \\text{for } k \\in \\{1, 2, 3\\} $$\n由于总需求等于总容量（$\\sum D_i = 5+4+3=12$ 和 $\\sum C_k = 5+3+4=12$），容量约束必须以等式形式成立：\n$$ \\sum_{i=1}^{3} x_{i,k} = C_k \\quad \\text{for } k \\in \\{1, 2, 3\\} $$\n- **非负性和整数性约束**：分配的帧数必须是非负整数。\n$$ x_{i,k} \\ge 0 \\quad \\text{for all } i,k $$\n$$ x_{i,k} \\in \\mathbb{Z} \\quad \\text{for all } i,k $$\n\n**3. 完整的ILP公式**\n代入给定值，问题是：\n最小化 $Z = 1x_{1,1} + 4x_{1,2} + 5x_{1,3} + 3x_{2,1} + 1x_{2,2} + 2x_{2,3} + 4x_{3,1} + 3x_{3,2} + 1x_{3,3}$\n约束条件为：\n- $x_{1,1} + x_{1,2} + x_{1,3} = 5$\n- $x_{2,1} + x_{2,2} + x_{2,3} = 4$\n- $x_{3,1} + x_{3,2} + x_{3,3} = 3$\n- $x_{1,1} + x_{2,1} + x_{3,1} = 5$\n- $x_{1,2} + x_{2,2} + x_{3,2} = 3$\n- $x_{1,3} + x_{2,3} + x_{3,3} = 4$\n- $x_{i,k} \\ge 0$ and $x_{i,k} \\in \\mathbb{Z}$ for $i,k \\in \\{1,2,3\\}$.\n\n这是一个经典的运输问题。我们可以通过首先寻找对应于最低成本 $\\alpha_{i,k}$ 的分配来解决它，这被称为最小成本法。\n\n成本矩阵 $\\boldsymbol{\\alpha}$ 是：\n$$ \\boldsymbol{\\alpha} = \\begin{pmatrix} 1 & 4 & 5 \\\\ 3 & 1 & 2 \\\\ 4 & 3 & 1 \\end{pmatrix} $$\n需求为 $D = (5, 4, 3)$，容量为 $C = (5, 3, 4)$。\n\n1.  找出 $\\boldsymbol{\\alpha}$ 矩阵中的最低成本。它们是 $\\alpha_{1,1}=1$, $\\alpha_{2,2}=1$ 和 $\\alpha_{3,3}=1$。\n2.  让我们对单元格 $(1,1)$ 进行分配。进程 $1$ 的需求是 $D_1=5$，颜色 $1$ 的容量是 $C_1=5$。我们可以分配 $x_{1,1} = \\min(5, 5) = 5$。这完全满足了进程 $1$ 的需求，并完全使用了颜色 $1$ 的容量。\n3.  接下来处理剩余的问题，其中进程1和颜色1已被满足。我们考虑进程2和3以及颜色2和3。\n    - 需求：$D_2=4, D_3=3$。\n    - 容量：$C_2=3, C_3=4$。\n    - 成本子矩阵：$\\begin{pmatrix} 1 & 2 \\\\ 3 & 1 \\end{pmatrix}$。\n4. 在子问题中，最低成本是 $\\alpha_{2,2}=1$ 和 $\\alpha_{3,3}=1$。我们选择单元格 $(2,2)$。进程 $2$ 的需求是 $D_2=4$，颜色 $2$ 的容量是 $C_2=3$。我们分配 $x_{2,2} = \\min(4, 3) = 3$。这耗尽了颜色 $2$ 的容量。\n5.  进程 $2$ 仍有 $4 - 3 = 1$ 的剩余需求。这必须分配给它唯一剩下的可用颜色，即颜色 $3$。因此，$x_{2,3}=1$。\n6.  剩下的未满足需求是进程 $3$ 的，它需要 $D_3=3$ 个帧。唯一具有可用容量的颜色是颜色 $3$。颜色 $3$ 的容量是 $C_3=4$，并且已经有 $1$ 个帧分配给了进程 $2$。因此，有 $4-1=3$ 个帧可用。我们分配 $x_{3,3}=3$。这满足了进程 $3$ 的需求并耗尽了颜色 $3$ 的容量。\n\n得到的分配矩阵 $X$ 是：\n$$ X = \\begin{pmatrix} x_{1,1} & x_{1,2} & x_{1,3} \\\\ x_{2,1} & x_{2,2} & x_{2,3} \\\\ x_{3,1} & x_{3,2} & x_{3,3} \\end{pmatrix} = \\begin{pmatrix} 5 & 0 & 0 \\\\ 0 & 3 & 1 \\\\ 0 & 0 & 3 \\end{pmatrix} $$\n该解是可行的，因为它满足所有需求和容量约束，并且由非负整数组成。\n\n**4. 计算最小总未命中率**\n我们现在用这个最优分配来计算目标函数 $Z$ 的值。\n$$ Z = (1 \\times x_{1,1}) + (4 \\times x_{1,2}) + (5 \\times x_{1,3}) + (3 \\times x_{2,1}) + (1 \\times x_{2,2}) + (2 \\times x_{2,3}) + (4 \\times x_{3,1}) + (3 \\times x_{3,2}) + (1 \\times x_{3,3}) $$\n$$ Z = (1 \\times 5) + (4 \\times 0) + (5 \\times 0) + (3 \\times 0) + (1 \\times 3) + (2 \\times 1) + (4 \\times 0) + (3 \\times 0) + (1 \\times 3) $$\n$$ Z = 5 + 0 + 0 + 0 + 3 + 2 + 0 + 0 + 3 $$\n$$ Z = 13 $$\n\n可实现的最小总未命中率为 $13$。", "answer": "$$ \\boxed{13} $$", "id": "3666023"}]}