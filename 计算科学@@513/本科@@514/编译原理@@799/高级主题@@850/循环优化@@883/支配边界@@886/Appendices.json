{"hands_on_practices": [{"introduction": "掌握支配边界的精确定义是关键，尤其是在处理循环等特殊控制流结构时。本练习旨在通过一个包含自循环的控制流图，帮助你深入理解支配边界的定义。通过计算一个节点是否属于其自身的支配边界，你将能更好地掌握在何种条件下，一个汇聚点需要为源于同一循环体的不同路径插入 $\\phi$ 函数 [@problem_id:3638510]。", "problem": "考虑一个控制流图 (CFG)，其节点标记为 $n_0, n_1, n_2, n_3, n_4, n_5$，$n_0$ 是唯一的入口节点，且所有节点均可从 $n_0$ 到达。有向边为 $n_0 \\to n_1, n_1 \\to n_2, n_2 \\to n_2, n_2 \\to n_3, n_1 \\to n_4, n_3 \\to n_4$ 和 $n_4 \\to n_5$。边 $n_2 \\to n_2$ 是一个自循环。仅使用支配者（dominator）和支配边界（dominance frontier）的标准定义，计算此CFG中节点 $n_2$ 的支配边界 (DF)，并确定 $n_2$ 是否属于其自身的支配边界。一个节点 $x$ 的支配边界 (DF) 定义为所有节点 $y$ 的集合，其中 $y$ 满足：$x$ 支配 $y$ 的至少一个前驱节点，但 $x$ 并不严格支配 $y$。如果从 $n_0$ 到 $n$ 的每一条路径都包含节点 $d$，则称节点 $d$ 支配节点 $n$；如果 $d$ 支配 $n$ 且 $d \\neq n$，则称 $d$ 严格支配 $n$。定义一个指示变量 $I$，如果 $n_2 \\in DF(n_2)$，则 $I$ 等于 $1$，否则等于 $0$。对于每个节点标签 $n_i$，定义 $idx(n_i) = i$。报告单一数值 $J = \\sum_{y \\in DF(n_2)} idx(y) + I$。无需四舍五入。", "solution": "本题要求计算一个量 $J$，该量由给定控制流图 (CFG) 中特定节点 $n_2$ 的支配边界 (DF) 导出。该过程将分三步进行：首先，确定CFG中每个节点的支配者集合；其次，使用这些支配者集合计算 $DF(n_2)$；第三，计算最终的量 $J$。\n\n给定的CFG有节点 $\\{n_0, n_1, n_2, n_3, n_4, n_5\\}$ 和边 $\\{n_0 \\to n_1, n_1 \\to n_2, n_2 \\to n_2, n_2 \\to n_3, n_1 \\to n_4, n_3 \\to n_4, n_4 \\to n_5\\}$。唯一的入口节点是 $n_0$。\n\n**第一步：计算支配者集合**\n\n如果从入口节点 $n_0$到节点 $n$ 的每条路径都包含节点 $d$，则称节点 $d$ 支配节点 $n$，记作 $d \\in Dom(n)$。一个节点总是支配其自身。\n\n*   $Dom(n_0)$：从 $n_0$ 到 $n_0$ 的唯一路径是空路径。根据定义，$n_0$ 支配其自身。因此，$Dom(n_0) = \\{n_0\\}$。\n*   $Dom(n_1)$：从 $n_0$到 $n_1$ 的唯一路径是 $n_0 \\to n_1$。此路径上的节点是 $\\{n_0, n_1\\}$。因此，$Dom(n_1) = \\{n_0, n_1\\}$。\n*   $Dom(n_2)$：任何从 $n_0$到 $n_2$ 的路径都必须首先经过 $n_1$。初始路径段为 $n_0 \\to n_1 \\to n_2$。自循环 $n_2 \\to n_2$ 不会引入一条避开 $n_0$ 或 $n_1$ 的路径。因此，每条到 $n_2$ 的路径都包含 $n_0$、$n_1$ 和 $n_2$。$Dom(n_2) = \\{n_0, n_1, n_2\\}$。\n*   $Dom(n_3)$：要到达 $n_3$，必须通过边 $n_2 \\to n_3$ 经过 $n_2$。因此，任何到 $n_3$ 的路径都必须是到 $n_2$ 路径的延伸。$n_3$ 的支配者包括 $n_2$ 的所有支配者。因此，$Dom(n_3) = Dom(n_2) \\cup \\{n_3\\} = \\{n_0, n_1, n_2, n_3\\}$。\n*   $Dom(n_4)$：有两条进入 $n_4$ 的入边，一条来自 $n_1$，一条来自 $n_3$。这意味着从 $n_0$ 到 $n_4$ 至少有两种不同的路径结构：\n    1.  $P_1 = n_0 \\to n_1 \\to n_4$。此路径上的节点：$\\{n_0, n_1, n_4\\}$。\n    2.  $P_2 = n_0 \\to n_1 \\to n_2 \\to n_3 \\to n_4$。此路径上的节点：$\\{n_0, n_1, n_2, n_3, n_4\\}$。\n    $n_4$ 的支配者是从 $n_0$ 到 $n_4$ 所有可能路径上节点的交集（再加上 $n_4$ 本身）。所有路径共有的节点集是代表性路径节点集的交集：$\\{n_0, n_1, n_4\\} \\cap \\{n_0, n_1, n_2, n_3, n_4\\} = \\{n_0, n_1, n_4\\}$。\n    因此，$Dom(n_4) = \\{n_0, n_1, n_4\\}$。\n*   $Dom(n_5)$：到达 $n_5$ 的唯一方法是从 $n_4$ 出发。因此，任何到 $n_5$ 的路径都是到 $n_4$ 路径的延伸。$n_5$ 的支配者是 $n_4$ 的支配者加上 $n_5$ 本身。$Dom(n_5) = Dom(n_4) \\cup \\{n_5\\} = \\{n_0, n_1, n_4, n_5\\}$。\n\n**第二步：计算支配边界 $DF(n_2)$**\n\n一个节点 $x$ 的支配边界定义为所有节点 $y$ 的集合，其中 $y$ 满足：$x$ 支配 $y$ 的一个前驱节点，但 $x$ 不严格支配 $y$。\n如果 $d$ 支配 $n$ 且 $d \\neq n$，则称节点 $d$ 严格支配 $n$。\n\n我们需要计算 $DF(n_2)$。我们将检查图中的每个节点 $y$，以确定它是否在 $DF(n_2)$ 中。条件是：\n$y \\in DF(n_2) \\iff (\\exists p \\in Pred(y) \\text{ 使得 } n_2 \\in Dom(p)) \\land (n_2 \\text{ 不严格支配 } y)$。\n\n首先，我们列出每个节点的前驱节点：\n$Pred(n_0) = \\emptyset$\n$Pred(n_1) = \\{n_0\\}$\n$Pred(n_2) = \\{n_1, n_2\\}$\n$Pred(n_3) = \\{n_2\\}$\n$Pred(n_4) = \\{n_1, n_3\\}$\n$Pred(n_5) = \\{n_4\\}$\n\n现在我们逐一检查每个节点 $y$：\n*   $y = n_0$：$Pred(n_0)$ 为空，因此条件的第一个部分不成立。$n_0 \\notin DF(n_2)$。\n*   $y = n_1$：$Pred(n_1)=\\{n_0\\}$。$n_2$ 是否支配 $n_0$？否，$Dom(n_0) = \\{n_0\\}$。第一个条件不成立。$n_1 \\notin DF(n_2)$。\n*   $y = n_2$：$Pred(n_2)=\\{n_1, n_2\\}$。\n    1.  我们需要找到一个被 $n_2$ 支配的 $n_2$ 的前驱节点 $p$。我们检查 $p=n_2$。$n_2 \\in Dom(n_2)$，这是成立的。所以第一个条件满足。\n    2.  $n_2$ 是否不严格支配 $n_2$？要使 $n_2$ 严格支配 $n_2$，需要 $n_2 \\in Dom(n_2)$ 且 $n_2 \\neq n_2$。第二部分（$n_2 \\neq n_2$）是假的。因此，$n_2$ 不严格支配 $n_2$。第二个条件满足。\n    由于两个条件都成立，所以 $n_2 \\in DF(n_2)$。\n*   $y = n_3$：$Pred(n_3)=\\{n_2\\}$。\n    1.  前驱节点是 $p=n_2$。$n_2$ 是否支配 $n_2$？是。第一个条件满足。\n    2.  $n_2$ 是否不严格支配 $n_3$？从第一步可知，$Dom(n_3)=\\{n_0, n_1, n_2, n_3\\}$。由于 $n_2 \\in Dom(n_3)$ 且 $n_2 \\neq n_3$，所以 $n_2$ *确实*严格支配 $n_3$。第二个条件不成立。\n    因此，$n_3 \\notin DF(n_2)$。\n*   $y = n_4$：$Pred(n_4)=\\{n_1, n_3\\}$。\n    1.  我们需要找到一个被 $n_2$ 支配的 $n_4$ 的前驱节点 $p$。\n        - 检查 $p=n_1$：$n_2$ 是否支配 $n_1$？否，$Dom(n_1)=\\{n_0, n_1\\}$。\n        - 检查 $p=n_3$：$n_2$ 是否支配 $n_3$？是，$Dom(n_3)=\\{n_0, n_1, n_2, n_3\\}$。\n        由于一个前驱节点（$n_3$）被 $n_2$ 支配，第一个条件满足。\n    2.  $n_2$ 是否不严格支配 $n_4$？从第一步可知，$Dom(n_4)=\\{n_0, n_1, n_4\\}$。由于 $n_2 \\notin Dom(n_4)$，$n_2$ 不支配 $n_4$，因此也不可能严格支配 $n_4$。第二个条件满足。\n    由于两个条件都成立，所以 $n_4 \\in DF(n_2)$。\n*   $y = n_5$：$Pred(n_5)=\\{n_4\\}$。\n    1.  前驱节点是 $p=n_4$。$n_2$ 是否支配 $n_4$？否，$Dom(n_4)=\\{n_0, n_1, n_4\\}$。第一个条件不成立。\n    因此，$n_5 \\notin DF(n_2)$。\n\n综合这些结果，$n_2$ 的支配边界是 $DF(n_2) = \\{n_2, n_4\\}$。\n\n**第三步：计算最终的量 $J$**\n\n题目要求计算 $J = \\sum_{y \\in DF(n_2)} idx(y) + I$ 的值。\n\n首先，我们确定指示变量 $I$ 的值。$I$ 的定义是：如果 $n_2 \\in DF(n_2)$，则为 $1$；否则为 $0$。从第二步中，我们发现 $n_2 \\in DF(n_2)$。因此，$I=1$。\n\n接下来，我们计算总和。函数 $idx(n_i)$ 定义为 $i$。\n$$ \\sum_{y \\in DF(n_2)} idx(y) = idx(n_2) + idx(n_4) $$\n根据 $idx$ 的定义，我们有 $idx(n_2)=2$ 和 $idx(n_4)=4$。\n$$ \\sum_{y \\in DF(n_2)} idx(y) = 2 + 4 = 6 $$\n最后，我们计算 $J$：\n$$ J = \\left(\\sum_{y \\in DF(n_2)} idx(y)\\right) + I = 6 + 1 = 7 $$\n最终的数值是 $7$。", "answer": "$$\\boxed{7}$$", "id": "3638510"}, {"introduction": "计算支配边界的核心目的之一是指导静态单赋值（SSA）形式的构建。本练习将理论付诸实践，要求你为一个经典的“菱形”控制流结构计算所有节点的支配边界。随后，你将利用这些计算结果，为几个不同定义位置的变量，确定其 $\\phi$ 函数的精确插入位置 [@problem_id:3638894]。", "problem": "考虑一个控制流图 (CFG)，其节点为 $E$, $B$, $L$, $R$, $J$, $B_{2}$, $L_{2}$, $R_{2}$, $J_{2}$ 和 $X$。有向边如下：\n$E \\rightarrow B$, $B \\rightarrow L$, $B \\rightarrow R$, $L \\rightarrow J$, $R \\rightarrow J$, $J \\rightarrow B_{2}$, $B_{2} \\rightarrow L_{2}$, $B_{2} \\rightarrow R_{2}$, $L_{2} \\rightarrow J_{2}$, $R_{2} \\rightarrow J_{2}$ 和 $J_{2} \\rightarrow X$。该 CFG 形成了两个串联的菱形区域。\n\n使用编译器理论中的以下基本定义：\n- 如果从入口节点到节点 $n$ 的每一条路径都包含节点 $d$，则称节点 $d$ 支配节点 $n$。如果 $d \\neq n$，则 $d$ 严格支配 $n$。\n- 节点 $n$ 的支配边界 $DF(n)$ 是所有节点 $y$ 的集合，其中 $y$ 存在一个前驱节点 $p$，$n$ 支配 $p$，但 $n$ 并不严格支配 $y$。\n- 静态单赋值 (SSA) 形式是一种程序表示形式，其中每个变量只被赋值一次，并在汇合点使用 $\\phi$-函数来合并来自多个前驱节点的值。使用 Cytron 等人的 SSA 构造算法，不进行基于活跃度的剪枝：对于每个变量，在其所有定义点集合的迭代支配边界中的节点处放置 $\\phi$-函数，直到达到不动点。\n\n任务：\n1. 计算每个节点 $n \\in \\{E, B, L, R, J, B_{2}, L_{2}, R_{2}, J_{2}, X\\}$ 的支配边界 $DF(n)$。\n2. 假设有 3 个标量变量 $x$、$y$ 和 $w$ 定义如下：\n   - $x$ 在 $L$ 和 $R$ 中定义。\n   - $y$ 在 $L_{2}$ 和 $R_{2}$ 中定义。\n   - $w$ 在 $R$ 和 $L_{2}$ 中定义。\n   使用上述 SSA 构造方法，通过计算每个变量定义点的迭代支配边界，确定为它们放置 $\\phi$-函数的位置。\n3. 这三个变量总共插入了多少个 $\\phi$-函数？请以单个整数形式提供最终答案。无需四舍五入。", "solution": "该问题要求对给定的控制流图 (CFG) 进行分析，以根据 Cytron 等人的静态单赋值 (SSA) 构造算法确定 $\\phi$-函数的位置。这包括三个主要步骤：首先，确定图中所有节点的支配边界；其次，利用这些信息为三个特定变量的定义点找到迭代支配边界；第三，计算所需的 $\\phi$-函数总数。\n\n该 CFG 的节点集为 $N = \\{E, B, L, R, J, B_{2}, L_{2}, R_{2}, J_{2}, X\\}$，有向边集为 $A = \\{ (E,B), (B,L), (B,R), (L,J), (R,J), (J,B_{2}), (B_{2},L_{2}), (B_{2},R_{2}), (L_{2},J_{2}), (R_{2},J_{2}), (J_{2},X) \\}$。节点 $E$ 是图的唯一入口节点，因为其入度为 $0$。\n\n首先，我们必须确定支配关系。如果从入口节点 $E$到节点 $n$ 的每条路径都包含节点 $d$，则称节点 $d$ 支配节点 $n$，记作 $d \\text{ dom } n$。如果 $d \\text{ dom } n$ 且 $d \\neq n$，则称节点 $d$ 严格支配节点 $n$，记作 $d \\text{ sdom } n$。节点 $n$ 的直接支配节点，记为 $\\text{idom}(n)$，是 $n$ 的一个严格支配节点，它被 $n$ 的所有其他严格支配节点所支配。\n\n通过分析从 $E$ 出发的所有路径，我们建立以下直接支配关系：\n- $\\text{idom}(B) = E$\n- $\\text{idom}(L) = B$\n- $\\text{idom}(R) = B$\n- $\\text{idom}(J) = B$。这是因为任何到达 $J$ 的路径都必须经过 $B$，而路径 $E \\rightarrow B \\rightarrow L \\rightarrow J$ 和 $E \\rightarrow B \\rightarrow R \\rightarrow J$ 表明 $L$ 和 $R$ 都不支配 $J$。\n- $\\text{idom}(B_{2}) = J$\n- $\\text{idom}(L_{2}) = B_{2}$\n- $\\text{idom}(R_{2}) = B_{2}$\n- $\\text{idom}(J_{2}) = B_{2}$。与 $J$ 类似，任何到达 $J_{2}$ 的路径都必须经过 $B_{2}$，但不一定经过 $L_{2}$ 或 $R_{2}$。\n- $\\text{idom}(X) = J_{2}$\n\n支配树代表了直接支配关系，可以由这些关系构建。$E$ 是根节点。任何节点 $d$ 的子节点是所有满足 $\\text{idom}(n) = d$ 的节点 $n$。\n\n**任务1：计算每个节点的支配边界 $DF(n)$**\n\n节点 $n$ 的支配边界 $DF(n)$ 是所有满足以下条件的节点 $y$ 的集合：$n$ 支配 $y$ 的一个前驱节点 $p$，但 $n$ 并不严格支配 $y$。我们将此定义应用于每个节点 $n \\in N$。\n\n- $DF(L)$：从 $L$ 出发的唯一出边是 $L \\rightarrow J$。这里，前驱节点 $p$ 是 $L$，后继节点 $y$ 是 $J$。我们检查条件：$L \\text{ dom } L$，但 $L$ 并不严格支配 $J$（因为 $\\text{idom}(J) = B$）。因此，$J \\in DF(L)$。所以，$DF(L) = \\{J\\}$。\n- $DF(R)$：与 $L$ 对称推理，边 $R \\rightarrow J$ 导致 $J \\in DF(R)$。所以，$DF(R) = \\{J\\}$。\n- $DF(L_{2})$：边是 $L_{2} \\rightarrow J_{2}$。前驱节点是 $p=L_{2}$，后继节点是 $y=J_{2}$。我们检查：$L_{2} \\text{ dom } L_{2}$，但 $L_{2}$ 并不严格支配 $J_{2}$（因为 $\\text{idom}(J_{2}) = B_{2}$）。因此，$J_{2} \\in DF(L_{2})$。所以，$DF(L_{2}) = \\{J_{2}\\}$。\n- $DF(R_{2})$：与 $L_{2}$ 对称推理，边 $R_{2} \\rightarrow J_{2}$ 导致 $J_{2} \\in DF(R_{2})$。所以，$DF(R_{2}) = \\{J_{2}\\}$。\n- 对于所有其他节点 $n \\in \\{E, B, J, B_{2}, J_{2}, X\\}$，任何满足 $n \\text{ dom } p$ 的边 $(p, y)$ 也都具有 $n \\text{ sdom } y$ 的性质。例如，考虑 $n=J$。$J$ 支配 $J, B_2, L_2, R_2, J_2$ 和 $X$。从这些节点之一出发的任何边（例如 $J \\rightarrow B_2$ 或 $L_2 \\rightarrow J_2$）都指向一个同样被 $J$ 严格支配的节点。因此，它们的支配边界为空。\n- $DF(E) = \\emptyset$\n- $DF(B) = \\emptyset$\n- $DF(J) = \\emptyset$\n- $DF(B_{2}) = \\emptyset$\n- $DF(J_{2}) = \\emptyset$\n- $DF(X) = \\emptyset$（没有出边）\n\n总结任务1，非空的支配边界为：\n$DF(L) = \\{J\\}$\n$DF(R) = \\{J\\}$\n$DF(L_{2}) = \\{J_{2}\\}$\n$DF(R_{2}) = \\{J_{2}\\}$\n\n**任务2：确定变量 $x$、$y$ 和 $w$ 的 $\\phi$-函数放置位置**\n\nCytron 等人的算法指出，一个变量的 $\\phi$-函数被放置在包含该变量定义的节点集 $S$ 的迭代支配边界 $DF^{+}(S)$ 中的每个节点上。迭代支配边界是通过重复计算原始定义点与前一轮迭代中找到的新增位置的并集的支配边界来计算的，直到达到不动点。设 $\\Phi$ 为放置 $\\phi$-函数的节点集合。\n\n- **变量 $x$**：在 $S_x = \\{L, R\\}$ 中定义。\n我们计算 $DF^+(S_x)$。\n需要计算其边界的初始节点集是 $S_x$。\n$DF(S_x) = DF(L) \\cup DF(R) = \\{J\\} \\cup \\{J\\} = \\{J\\}$。\n所以，我们必须在节点 $J$ 为 $x$ 放置一个 $\\phi$-函数，即 $\\Phi_x = \\{J\\}$。\n现在我们迭代：我们计算新“定义”集 $S_x \\cup \\Phi_x = \\{L, R, J\\}$ 的 DF。\n$DF(L) \\cup DF(R) \\cup DF(J) = \\{J\\} \\cup \\{J\\} \\cup \\emptyset = \\{J\\}$。\n$\\phi$-函数的位置集合没有改变。达到不动点。\n变量 $x$ 的 $\\phi$-函数放置节点集是 $\\Phi_x = \\{J\\}$。这需要 1 个 $\\phi$-函数。\n\n- **变量 $y$**：在 $S_y = \\{L_{2}, R_{2}\\}$ 中定义。\n我们计算 $DF^+(S_y)$。\n$DF(S_y) = DF(L_{2}) \\cup DF(R_{2}) = \\{J_{2}\\} \\cup \\{J_{2}\\} = \\{J_{2}\\}$。\n所以，我们必须在节点 $J_{2}$ 为 $y$ 放置一个 $\\phi$-函数，即 $\\Phi_y = \\{J_{2}\\}$。\n现在我们迭代：我们计算 $\\{L_{2}, R_{2}, J_{2}\\}$ 的 DF。\n$DF(L_{2}) \\cup DF(R_{2}) \\cup DF(J_{2}) = \\{J_{2}\\} \\cup \\{J_{2}\\} \\cup \\emptyset = \\{J_{2}\\}$。\n达到不动点。\n变量 $y$ 的 $\\phi$-函数放置节点集是 $\\Phi_y = \\{J_{2}\\}$。这需要 1 个 $\\phi$-函数。\n\n- **变量 $w$**：在 $S_w = \\{R, L_{2}\\}$ 中定义。\n我们计算 $DF^+(S_w)$。\n$DF(S_w) = DF(R) \\cup DF(L_{2}) = \\{J\\} \\cup \\{J_{2}\\} = \\{J, J_{2}\\}$。\n所以，我们必须在节点 $J$ 和 $J_{2}$ 为 $w$ 放置 $\\phi$-函数，即 $\\Phi_w = \\{J, J_{2}\\}$。\n现在我们迭代：我们计算 $\\{R, L_{2}, J, J_{2}\\}$ 的 DF。\n$DF(R) \\cup DF(L_{2}) \\cup DF(J) \\cup DF(J_{2}) = \\{J\\} \\cup \\{J_{2}\\} \\cup \\emptyset \\cup \\emptyset = \\{J, J_{2}\\}$。\n达到不动点。\n变量 $w$ 的 $\\phi$-函数放置节点集是 $\\Phi_w = \\{J, J_{2}\\}$。这需要 2 个 $\\phi$-函数。\n\n**任务3：计算 $\\phi$-函数的总数**\n\n$\\phi$-函数的总数是为每个变量插入的 $\\phi$-函数数量之和。\n变量 $x$ 的数量：$|\\Phi_x| = |\\{J\\}| = 1$。\n变量 $y$ 的数量：$|\\Phi_y| = |\\{J_{2}\\}| = 1$。\n变量 $w$ 的数量：$|\\Phi_w| = |\\{J, J_{2}\\}| = 2$。\n\n$\\phi$-函数总数 = $1 + 1 + 2 = 4$。", "answer": "$$\n\\boxed{4}\n$$", "id": "3638894"}, {"introduction": "在掌握了从变量定义点推导 $\\phi$ 函数位置的正向过程后，一个更具挑战性的任务是进行“逆向工程”。本练习提供了一组已知的 $\\phi$ 函数位置，要求你反向推断出可能产生这些 $\\phi$ 函数的最小变量定义点集合。这个过程不仅能巩固你对迭代支配边界的理解，还能提升你从结果反推原因的分析与解决问题的能力 [@problem_id:3638500]。", "problem": "考虑以下控制流图 (CFG)，其具有唯一的入口节点 $1$ 和节点集 $\\{1,2,3,4,5,6,7,8,9,10\\}$。有向边如下：\n$$\n(1 \\to 2),\\ (1 \\to 3),\\ (2 \\to 4),\\ (3 \\to 4),\\ (4 \\to 5),\\ (4 \\to 6),\\ (5 \\to 7),\\ (6 \\to 7),\\ (7 \\to 8),\\ (7 \\to 9),\\ (8 \\to 10),\\ (9 \\to 10).\n$$\n使用编译原理中的标准定义。如果从入口节点 $1$到节点 $n$ 的每一条路径都包含节点 $d$，则称节点 $d$ 支配节点 $n$。如果节点 $d$ 支配节点 $n$ 且 $d \\neq n$，则称节点 $d$ 严格支配节点 $n$。节点 $d$ 的支配边界 $DF(d)$ 是所有节点 $y$ 的集合，其中 $d$ 支配 $y$ 的至少一个前驱节点，但 $d$ 并不严格支配 $y$。一个节点集合 $S$ 的迭代支配边界 $DF^{+}(S)$ 是从 $S$ 开始重复应用 $DF$ 的最小不动点，即：\n$$\nDF^{+}(S) = \\bigcup_{k \\geq 1} DF^{k}(S), \\quad \\text{其中 } DF^{1}(S) = \\bigcup_{s \\in S} DF(s) \\text{ 且 } DF^{k+1}(S) = \\bigcup_{n \\in DF^{k}(S)} DF(n).\n$$\n在静态单赋值 (SSA) 构造算法中，如果一个变量 $v$ 的定义点集为 $S$，那么算法会恰好在 $DF^{+}(S)$ 中的节点处放置 $\\phi$-函数。假设对于此 CFG，观察到的 $\\phi$-函数放置集合是\n$$\nT = \\{4,7,10\\}.\n$$\n通过反向工程找出可能的原始定义点，即识别满足 $DF^{+}(S) = T$ 的集合 $S \\subseteq \\{1,2,3,4,5,6,7,8,9,10\\}$。在所有这些集合中，考虑那些基数最小的集合。确定满足 $DF^{+}(S) = T$ 的不同最小基数集合 $S$ 的数量。将你的最终答案表示为单个整数。无需四舍五入。", "solution": "本问题要求确定原始定义点的最小基数集合 $S$ 的数量，使得其迭代支配边界 $DF^{+}(S)$ 等于给定的 $\\phi$-函数放置集合 $T = \\{4, 7, 10\\}$。\n\n为解决此问题，我们必须首先计算给定控制流图 (CFG) 的支配属性。\n\n1. 支配关系\n如果从入口节点 ($1$) 到节点 $n$ 的每条路径都包含节点 $d$，则称节点 $d$ 支配节点 $n$，记为 $d \\text{ dom } n$。我们为每个节点 $n \\in \\{1, \\dots, 10\\}$ 计算其支配节点集合 $D(n)$。\n$D(1) = \\{1\\}$\n$D(2) = \\{1, 2\\}$\n$D(3) = \\{1, 3\\}$\n$D(4) = (D(2) \\cap D(3)) \\cup \\{4\\} = (\\{1, 2\\} \\cap \\{1, 3\\}) \\cup \\{4\\} = \\{1, 4\\}$\n$D(5) = D(4) \\cup \\{5\\} = \\{1, 4, 5\\}$\n$D(6) = D(4) \\cup \\{6\\} = \\{1, 4, 6\\}$\n$D(7) = (D(5) \\cap D(6)) \\cup \\{7\\} = (\\{1, 4, 5\\} \\cap \\{1, 4, 6\\}) \\cup \\{7\\} = \\{1, 4, 7\\}$\n$D(8) = D(7) \\cup \\{8\\} = \\{1, 4, 7, 8\\}$\n$D(9) = D(7) \\cup \\{9\\} = \\{1, 4, 7, 9\\}$\n$D(10) = (D(8) \\cap D(9)) \\cup \\{10\\} = (\\{1, 4, 7, 8\\} \\cap \\{1, 4, 7, 9\\}) \\cup \\{10\\} = \\{1, 4, 7, 10\\}$\n\n2. 直接支配节点和支配树\n节点 $n$ 的直接支配节点 $idom(n)$ 是在从入口到 $n$ 的任意路径上最接近 $n$ 的严格支配节点。从支配节点集合中，我们可以推导出直接支配节点：\n$idom(2) = 1$\n$idom(3) = 1$\n$idom(4) = 1$\n$idom(5) = 4$\n$idom(6) = 4$\n$idom(7) = 4$\n$idom(8) = 7$\n$idom(9) = 7$\n$idom(10) = 7$\n支配树的结构如下：节点 $1$ 是节点 $2, 3, 4$ 的父节点；节点 $4$ 是节点 $5, 6, 7$ 的父节点；节点 $7$ 是节点 $8, 9, 10$ 的父节点。\n\n3. 支配边界\n节点 $n$ 的支配边界 $DF(n)$ 是所有节点 $y$ 的集合，其中 $n$ 支配 $y$ 的一个前驱节点，但 $n$ 并不严格支配 $y$。我们为每个节点 $n$ 计算 $DF(n)$。一种系统的方法是考虑 CFG 中的每个“汇合点”——即具有多个前驱节点的节点。\n汇合点是 $4$、$7$ 和 $10$。\n对于汇合点 $y=4$（前驱为 $p_1=2, p_2=3$）：\n$idom(4)=1$。在支配树中从 $p_1=2$ 到 $idom(4)=1$ 的路径仅包含节点 $2$。因此 $4 \\in DF(2)$。从 $p_2=3$ 到 $idom(4)=1$ 的路径仅包含节点 $3$。因此 $4 \\in DF(3)$。\n对于汇合点 $y=7$（前驱为 $p_1=5, p_2=6$）：\n$idom(7)=4$。在支配树中从 $p_1=5$ 到 $idom(7)=4$ 的路径仅包含节点 $5$。因此 $7 \\in DF(5)$。从 $p_2=6$ 到 $idom(7)=4$ 的路径仅包含节点 $6$。因此 $7 \\in DF(6)$。\n对于汇合点 $y=10$（前驱为 $p_1=8, p_2=9$）：\n$idom(10)=7$。在支配树中从 $p_1=8$ 到 $idom(10)=7$ 的路径仅包含节点 $8$。因此 $10 \\in DF(8)$。从 $p_2=9$ 到 $idom(10)=7$ 的路径仅包含节点 $9$。因此 $10 \\in DF(9)$。\n在此 CFG 中，非空的支配边界为：\n$DF(2) = \\{4\\}$\n$DF(3) = \\{4\\}$\n$DF(5) = \\{7\\}$\n$DF(6) = \\{7\\}$\n$DF(8) = \\{10\\}$\n$DF(9) = \\{10\\}$\n所有其他节点的支配边界都是空集 $\\emptyset$。具体来说，$DF(1) = \\emptyset$, $DF(4) = \\emptyset$, $DF(7) = \\emptyset$, $DF(10) = \\emptyset$。\n\n4. 迭代支配边界和最小集\n我们要寻找满足 $DF^{+}(S) = T = \\{4, 7, 10\\}$ 的最小集 $S$。\n迭代支配边界是 $DF^{+}(S) = \\bigcup_{k \\geq 1} DF^{k}(S)$。\n$DF^{1}(S) = \\bigcup_{s \\in S} DF(s)$。\n$DF^{2}(S) = \\bigcup_{n \\in DF^{1}(S)} DF(n)$。\n让我们计算 $DF^2(S)$。它依赖于 $DF^1(S)$。如果我们能实现 $DF^1(S) = T$，那么 $DF^2(S) = \\bigcup_{n \\in T} DF(n) = DF(4) \\cup DF(7) \\cup DF(10) = \\emptyset \\cup \\emptyset \\cup \\emptyset = \\emptyset$。\n这意味着对于 $k > 1$ 的任何进一步迭代 $DF^k(S)$ 也将得到 $\\emptyset$。因此，如果 $DF^1(S)=T$，则 $DF^{+}(S)=DF^{1}(S)$。\n问题简化为寻找满足 $\\bigcup_{s \\in S} DF(s) = \\{4, 7, 10\\}$ 的最小集 $S$。\n\n为了构造目标集 $T = \\{4, 7, 10\\}$，我们需要组合 $S$ 中节点的支配边界。\n为了获得元素 $4$，$S$ 必须包含一个节点 $s$ 使得 $4 \\in DF(s)$。根据我们的列表， $s$ 的可能选择是 $2$ 或 $3$。所以，$S \\cap \\{2, 3\\} \\neq \\emptyset$。\n为了获得元素 $7$，$S$ 必须包含一个节点 $s$ 使得 $7 \\in DF(s)$。可能的选择是 $5$ 或 $6$。所以，$S \\cap \\{5, 6\\} \\neq \\emptyset$。\n为了获得元素 $10$，$S$ 必须包含一个节点 $s$ 使得 $10 \\in DF(s)$。可能的选择是 $8$ 或 $9$。所以，$S \\cap \\{8, 9\\} \\neq \\emptyset$。\n\n为 $T$ 中每个元素提供“生成”的节点集合是互不相交的：$\\{2, 3\\}$、$\\{5, 6\\}$ 和 $\\{8, 9\\}$。此外，没有任何单个节点的 DF 包含超过一个来自 $T$ 的元素。因此，要生成 $T$ 的所有三个元素，集合 $S$ 必须从这三个生成器集合中各包含至少一个节点。这意味着 $S$ 的最小基数是 $3$。\n\n5. 计算最小集数量\n一个最小基数集合 $S$ 必须满足 $|S|=3$，并且必须通过从三个生成器集合中各选取一个节点来构成。\n令 $S = \\{s_1, s_2, s_3\\}$，其中：\n$s_1 \\in \\{2, 3\\}$（有 $2$ 种选择）\n$s_2 \\in \\{5, 6\\}$（有 $2$ 种选择）\n$s_3 \\in \\{8, 9\\}$（有 $2$ 种选择）\n\n满足条件的、具有最小基数的不同集合 $S$ 的总数是每个元素选择数量的乘积。\n集合数量 = (生成 $4$ 的选择数) $\\times$ (生成 $7$ 的选择数) $\\times$ (生成 $10$ 的选择数)\n集合数量 = $2 \\times 2 \\times 2 = 8$。\n\n这 $8$ 个可能的最小基数集合是：\n$\\{2, 5, 8\\}$, $\\{2, 5, 9\\}$, $\\{2, 6, 8\\}$, $\\{2, 6, 9\\}$, $\\{3, 5, 8\\}$, $\\{3, 5, 9\\}$, $\\{3, 6, 8\\}$, $\\{3, 6, 9\\}$。\n这些集合中的每一个基数都为 $3$，并且满足 $DF^{+}(S) = \\{4, 7, 10\\}$。这样的集合数量为 $8$。", "answer": "$$\n\\boxed{8}\n$$", "id": "3638500"}]}