{"hands_on_practices": [{"introduction": "要真正掌握直接支配点的概念，最好的方法是从其基本定义出发进行实践。这个练习提供了一个简单明了的控制流图（CFG），要求你直接应用支配点的定义来找出特定节点的直接支配点。通过分析增加一条边如何改变图的路径集合，你将更深刻地理解支配关系对图结构的敏感性。[@problem_id:3645211]", "problem": "给定一个有向控制流图 (CFG)，其入口节点为 $s$，节点包括 $a$、$b$、$c$ 和 $j$。该 CFG 包含边 $s \\to a$、$s \\to b$、$s \\to c$，以及 $a \\to j$、$b \\to j$、$c \\to j$。所有节点均可从 $s$ 到达。仅使用支配和直接支配的基本定义，确定此 CFG 的 $\\mathrm{idom}(j)$。然后，考虑一个修改后的 CFG，该图通过额外添加边 $b \\to a$ 得到；确定修改后 CFG 的新 $\\mathrm{idom}(j)$。\n\n使用的定义：\n- 如果从入口节点 $s$ 到节点 $y$ 的每条有向路径都包含节点 $x$，则节点 $x$ 支配节点 $y$。\n- 如果节点 $x$ 支配节点 $y$ 且 $x \\neq y$，则节点 $x$ 严格支配节点 $y$。\n- 节点 $y$ 的直接支配者 $\\mathrm{idom}(y)$ 是 $y$ 的唯一严格支配者，且它不严格支配 $y$ 的任何其他严格支配者。\n\n将你的最终答案表示为一个二元行向量 $\\left(x, y\\right)$，其中 $x$ 是原始 CFG 中的 $\\mathrm{idom}(j)$，$y$ 是修改后 CFG 中的 $\\mathrm{idom}(j)$，使用 LaTeX 的 $\\mathrm{pmatrix}$ 环境写为 $\\begin{pmatrix} x  y \\end{pmatrix}$。无需四舍五入，也不涉及物理单位。将节点名称表示为数学符号（例如，$s$、$a$）。", "solution": "### 第 1 部分：分析原始 CFG\n\n设原始 CFG 为 $G_1$。节点集为 $V = \\{s, a, b, c, j\\}$，边集为 $E_1 = \\{(s, a), (s, b), (s, c), (a, j), (b, j), (c, j)\\}$。入口节点是 $s$。我们想要求出 $\\mathrm{idom}(j)$。\n\n首先，我们必须找出从入口节点 $s$到目标节点 $j$ 的所有路径。\n简单路径有：\n1. $P_1: s \\to a \\to j$\n2. $P_2: s \\to b \\to j$\n3. $P_3: s \\to c \\to j$\n\n根据定义，如果节点 $x$ 出现在从 $s$ 到 $j$ 的每条路径上，则它支配 $j$。我们必须找到每个路径的节点集的交集。\n- $P_1$ 中的节点：$\\{s, a, j\\}$\n- $P_2$ 中的节点：$\\{s, b, j\\}$\n- $P_3$ 中的节点：$\\{s, c, j\\}$\n\n$j$ 的支配者集合，记为 $\\mathrm{dom}(j)$，是这些集合的交集：\n$$ \\mathrm{dom}(j) = \\{s, a, j\\} \\cap \\{s, b, j\\} \\cap \\{s, c, j\\} = \\{s, j\\} $$\n支配 $j$ 的节点是 $s$ 和 $j$ 本身。\n\n接下来，我们求 $j$ 的严格支配者集合。如果节点 $x$ 支配 $j$ 且 $x \\neq j$，则 $x$ 严格支配 $j$。\n$j$ 的严格支配者集合是：\n$$ \\mathrm{sdom}(j) = \\mathrm{dom}(j) \\setminus \\{j\\} = \\{s, j\\} \\setminus \\{j\\} = \\{s\\} $$\n\n最后，我们求 $j$ 的直接支配者 $\\mathrm{idom}(j)$。根据定义，$\\mathrm{idom}(j)$ 是 $j$ 的唯一严格支配者，且它不严格支配 $j$ 的任何其他严格支配者。\n$j$ 的严格支配者集合是 $\\{s\\}$。由于该集合只包含一个元素 $s$，所以 $s$ 显然是那个不严格支配 $j$ 的任何其他严格支配者的唯一严格支配者。\n因此，对于原始 CFG，$\\mathrm{idom}(j) = s$。\n\n### 第 2 部分：分析修改后的 CFG\n\n设修改后的 CFG 为 $G_2$。它是在 $G_1$ 的基础上添加边 $(b, a)$ 形成的。\n节点集仍然是 $V = \\{s, a, b, c, j\\}$。边集现在是 $E_2 = E_1 \\cup \\{(b, a)\\} = \\{(s, a), (s, b), (s, c), (a, j), (b, j), (c, j), (b, a)\\}$。入口节点仍然是 $s$。我们想要求出新的 $\\mathrm{idom}(j)$。\n\n首先，我们找出 $G_2$ 中从 $s$ 到 $j$ 的所有路径。该图是一个有向无环图 (DAG)，因此我们只需要考虑简单路径。\n添加边 $(b, a)$ 引入了一条新路径。简单路径有：\n1. $P_1: s \\to a \\to j$\n2. $P_2: s \\to b \\to j$\n3. $P_3: s \\to c \\to j$\n4. $P_4: s \\to b \\to a \\to j$\n\n现在我们通过求从 $s$ 到 $j$ 的所有路径的节点集的交集来找到 $j$ 的支配者集合。\n- $P_1$ 中的节点：$\\{s, a, j\\}$\n- $P_2$ 中的节点：$\\{s, b, j\\}$\n- $P_3$ 中的节点：$\\{s, c, j\\}$\n- $P_4$ 中的节点：$\\{s, b, a, j\\}$\n\n$j$ 的支配者集合 $\\mathrm{dom}(j)$ 是以下交集：\n$$ \\mathrm{dom}(j) = \\{s, a, j\\} \\cap \\{s, b, j\\} \\cap \\{s, c, j\\} \\cap \\{s, b, a, j\\} $$\n仅 $\\{s, b, j\\}$ 和 $\\{s, c, j\\}$ 的交集就是 $\\{s, j\\}$。因此，所有四个集合的交集至多是 $\\{s, j\\}$。\n我们验证 $s$ 和 $j$ 是否都在这四条路径中。经检验，确实如此。因此，\n$$ \\mathrm{dom}(j) = \\{s, j\\} $$\n\n接下来，我们求 $j$ 的严格支配者集合：\n$$ \\mathrm{sdom}(j) = \\mathrm{dom}(j) \\setminus \\{j\\} = \\{s, j\\} \\setminus \\{j\\} = \\{s\\} $$\n\n最后，我们求 $j$ 的直接支配者。严格支配者集合仍然是 $\\{s\\}$。和第一种情况一样，由于只有一个严格支配者，它就是直接支配者。\n因此，对于修改后的 CFG，$\\mathrm{idom}(j) = s$。\n\n### 结论\n\n对于原始 CFG， $j$ 的直接支配者是 $s$。\n对于修改后的 CFG， $j$ 的直接支配者也是 $s$。\n最终答案是行向量 $(s, s)$。", "answer": "$$\n\\boxed{\\begin{pmatrix} s  s \\end{pmatrix}}\n$$", "id": "3645211"}, {"introduction": "在掌握了基本定义之后，我们可以将其应用到更复杂的场景中。这个练习将挑战你分析一个包含循环和多条路径的完整控制流图，并为其中每个节点确定直接支配点，从而构建出完整的支配树。此外，本练习还引入了“支配边界”这一重要概念，它在静态单赋值（SSA）形式等编译器优化中扮演着核心角色。[@problem_id:3645154]", "problem": "考虑以下有向控制流图 (CFG)，其唯一入口节点为 $a$。节点集为 $\\{a,b,c,d,e,f,g,h,i,j\\}$，边集为\n$\\{(a,b),(a,c),(b,d),(c,d),(c,e),(d,f),(d,g),(e,c),(e,g),(f,h),(g,h),(g,i),(h,j),(i,d),(i,j)\\}$。\n  \n仅使用支配、直接支配节点和支配边界的基本定义，按以下步骤进行：\n\n1. 对每个节点 $n$ 确定其直接支配节点 $idom(n)$。你的推导应基于以下定义：节点 $x$ 支配节点 $y$ 当且仅当从入口节点 $a$ 到 $y$ 的每一条路径都包含 $x$；并且 $idom(y)$ 是 $y$ 的唯一严格支配节点，该节点不严格支配 $y$ 的任何其他严格支配节点。\n\n2. 在不重新计算任何全局支配集的情况下，仅使用已构建的 $idom$ 树（在 $idom(\\cdot)$ 下的子节点）和局部前驱关系，找出每个节点 $n$ 的支配边界 $DF(n)$。此处，一个节点 $n$ 的支配边界 (DF) 是这样的节点 $y$ 的集合：$n$ 支配 $y$ 的至少一个前驱节点，但 $n$ 并不严格支配 $y$。\n\n3. 令 $S$ 表示这些支配边界的基数之和，即\n$$\nS \\;=\\; \\sum_{n \\in \\{a,b,c,d,e,f,g,h,i,j\\}} |DF(n)| \\, .\n$$\n计算 $S$。你的最终答案必须是一个整数，无需四舍五入。", "solution": "首先，为了方便参考，我们列出每个节点 $n$ 的前驱节点，记为 $\\mathrm{pred}(n)$：\n$\\mathrm{pred}(a) = \\{\\}$\n$\\mathrm{pred}(b) = \\{a\\}$\n$\\mathrm{pred}(c) = \\{a, e\\}$\n$\\mathrm{pred}(d) = \\{b, c, i\\}$\n$\\mathrm{pred}(e) = \\{c\\}$\n$\\mathrm{pred}(f) = \\{d\\}$\n$\\mathrm{pred}(g) = \\{d, e\\}$\n$\\mathrm{pred}(h) = \\{f, g\\}$\n$\\mathrm{pred}(i) = \\{g\\}$\n$\\mathrm{pred}(j) = \\{h, i\\}$\n\n### 1. 确定直接支配节点 ($\\mathrm{idom}(n)$)\n如果从入口节点 $a$ 到节点 $y$ 的每条路径都包含节点 $x$，则 $x$ 支配 $y$。我们通过分析 CFG 中的路径来找到每个节点的支配节点集 $\\mathrm{dom}(n)$。根据定义，每个节点都支配其自身。\n\n$\\mathrm{dom}(a) = \\{a\\}$。作为入口节点，它只被自身支配。\n$\\mathrm{dom}(b) = \\{a, b\\}$。到 $b$ 的唯一路径是 $a \\to b$。\n$\\mathrm{dom}(c) = \\{a, c\\}$。所有到 $c$ 的路径都必须经过 $a$。路径 $a \\to c$ 表明没有其他节点（除了 $a$ 和 $c$）必须在每条路径上。循环 $c \\to e \\to c$ 不会从外部引入新的支配节点。\n$\\mathrm{dom}(d) = \\{a, d\\}$。$d$ 的前驱节点是 $\\{b, c, i\\}$。$d$ 的支配节点是 $\\{d\\} \\cup (\\mathrm{dom}(b) \\cap \\mathrm{dom}(c) \\cap \\mathrm{dom}(i))$。通过分析路径 $a \\to b \\to d$ 和 $a \\to c \\to d$，我们看到除了 $d$ 之外，唯一的公共节点是 $a$。因此，$d$ 的任何支配节点都必须是 $a$ 的支配节点。即使存在通过 $i$ 的路径，这个推论也成立，因为 $a$ 也支配 $i$。所以，$\\mathrm{dom}(d) = \\{a, d\\}$。\n$\\mathrm{dom}(e) = \\{a, c, e\\}$。$e$ 的唯一前驱节点是 $c$。因此，$\\mathrm{dom}(e) = \\{e\\} \\cup \\mathrm{dom}(c) = \\{e\\} \\cup \\{a, c\\} = \\{a, c, e\\}$。\n$\\mathrm{dom}(f) = \\{a, d, f\\}$。$f$ 的唯一前驱节点是 $d$。因此，$\\mathrm{dom}(f) = \\{f\\} \\cup \\mathrm{dom}(d) = \\{f\\} \\cup \\{a, d\\} = \\{a, d, f\\}$。\n$\\mathrm{dom}(g) = \\{a, g\\}$。$g$ 的前驱节点是 $\\{d, e\\}$。其支配节点为 $\\{g\\} \\cup (\\mathrm{dom}(d) \\cap \\mathrm{dom}(e)) = \\{g\\} \\cup (\\{a, d\\} \\cap \\{a, c, e\\}) = \\{g\\} \\cup \\{a\\} = \\{a, g\\}$。\n$\\mathrm{dom}(h) = \\{a, h\\}$。$h$ 的前驱节点是 $\\{f, g\\}$。其支配节点为 $\\{h\\} \\cup (\\mathrm{dom}(f) \\cap \\mathrm{dom}(g)) = \\{h\\} \\cup (\\{a, d, f\\} \\cap \\{a, g\\}) = \\{h\\} \\cup \\{a\\} = \\{a, h\\}$。\n$\\mathrm{dom}(i) = \\{a, g, i\\}$。$i$ 的唯一前驱节点是 $g$。因此，$\\mathrm{dom}(i) = \\{i\\} \\cup \\mathrm{dom}(g) = \\{i\\} \\cup \\{a, g\\} = \\{a, g, i\\}$。\n$\\mathrm{dom}(j) = \\{a, j\\}$。$j$ 的前驱节点是 $\\{h, i\\}$。其支配节点为 $\\{j\\} \\cup (\\mathrm{dom}(h) \\cap \\mathrm{dom}(i)) = \\{j\\} \\cup (\\{a, h\\} \\cap \\{a, g, i\\}) = \\{j\\} \\cup \\{a\\} = \\{a, j\\}$。\n\n直接支配节点 $\\mathrm{idom}(y)$ 是 $y$ 的唯一严格支配节点，该节点被 $y$ 的所有其他严格支配节点所支配。从支配节点集中，我们推导出直接支配节点：\n$\\mathrm{idom}(b) = a$，因为 $\\mathrm{sdom}(b) = \\{a\\}$。\n$\\mathrm{idom}(c) = a$，因为 $\\mathrm{sdom}(c) = \\{a\\}$。\n$\\mathrm{idom}(d) = a$，因为 $\\mathrm{sdom}(d) = \\{a\\}$。\n$\\mathrm{idom}(e) = c$，因为 $\\mathrm{sdom}(e) = \\{a, c\\}$ 且 $a$ 支配 $c$。\n$\\mathrm{idom}(f) = d$，因为 $\\mathrm{sdom}(f) = \\{a, d\\}$ 且 $a$ 支配 $d$。\n$\\mathrm{idom}(g) = a$，因为 $\\mathrm{sdom}(g) = \\{a\\}$。\n$\\mathrm{idom}(h) = a$，因为 $\\mathrm{sdom}(h) = \\{a\\}$。\n$\\mathrm{idom}(i) = g$，因为 $\\mathrm{sdom}(i) = \\{a, g\\}$ 且 $a$ 支配 $g$。\n$\\mathrm{idom}(j) = a$，因为 $\\mathrm{sdom}(j) = \\{a\\}$。\n\n### 2. 确定支配边界 ($DF(n)$)\n一个节点 $n$ 的支配边界 $DF(n)$ 是这样的节点 $y$ 的集合：$n$ 支配 $y$ 的一个前驱节点，但 $n$ 并不严格支配 $y$。\n\n$DF(a) = \\{\\}$。节点 $a$ 严格支配所有其他节点，所以对于任何 $y \\neq a$，条件“$a$ 不严格支配 $y$”永远不会满足。对于 $y=a$，它没有前驱节点。\n$DF(b) = \\{d\\}$。$b$ 支配其后继节点 $d$ 的前驱节点 $b$。$b$ 不严格支配 $d$（因为 $\\mathrm{dom}(d) = \\{a, d\\}$）。\n$DF(c) = \\{c, d, g\\}$。\n- $y=d$：$c \\in \\mathrm{pred}(d)$，$c$ 支配 $c$，且 $c$ 不严格支配 $d$。所以 $d \\in DF(c)$。\n- $y=c$：$e \\in \\mathrm{pred}(c)$，$c$ 支配 $e$，且 $c$ 不严格支配 $c$。所以 $c \\in DF(c)$。\n- $y=g$：$e \\in \\mathrm{pred}(g)$，$c$ 支配 $e$，且 $c$ 不严格支配 $g$。所以 $g \\in DF(c)$。\n$DF(d) = \\{g, h\\}$。\n- $y=g$：$d \\in \\mathrm{pred}(g)$，$d$ 支配 $d$，且 $d$ 不严格支配 $g$。所以 $g \\in DF(d)$。\n- $y=h$：$f \\in \\mathrm{pred}(h)$，$d$ 支配 $f$，且 $d$ 不严格支配 $h$。所以 $h \\in DF(d)$。\n$DF(e) = \\{c, g\\}$。\n- $y=c$：$e \\in \\mathrm{pred}(c)$，$e$ 支配 $e$，且 $e$ 不严格支配 $c$。所以 $c \\in DF(e)$。\n- $y=g$：$e \\in \\mathrm{pred}(g)$，$e$ 支配 $e$，且 $e$ 不严格支配 $g$。所以 $g \\in DF(e)$。\n$DF(f) = \\{h\\}$。$f \\in \\mathrm{pred}(h)$，$f$ 支配 $f$，且 $f$ 不严格支配 $h$。\n$DF(g) = \\{d, h, j\\}$。\n- $y=h$：$g \\in \\mathrm{pred}(h)$，$g$ 支配 $g$，且 $g$ 不严格支配 $h$。所以 $h \\in DF(g)$。\n- $y=d$：$i \\in \\mathrm{pred}(d)$，$g$ 支配 $i$，且 $g$ 不严格支配 $d$。所以 $d \\in DF(g)$。\n- $y=j$：$i \\in \\mathrm{pred}(j)$，$g$ 支配 $i$，且 $g$ 不严格支配 $j$。所以 $j \\in DF(g)$。\n$DF(h) = \\{j\\}$。$h \\in \\mathrm{pred}(j)$，$h$ 支配 $h$，且 $h$ 不严格支配 $j$。\n$DF(i) = \\{d, j\\}$。\n- $y=d$：$i \\in \\mathrm{pred}(d)$，$i$ 支配 $i$，且 $i$ 不严格支配 $d$。所以 $d \\in DF(i)$。\n- $y=j$：$i \\in \\mathrm{pred}(j)$，$i$ 支配 $i$，且 $i$ 不严格支配 $j$。所以 $j \\in DF(i)$。\n$DF(j) = \\{\\}$。节点 $j$ 没有后继节点。\n\n### 3. 计算总和 $S$\n总和 $S$ 是所有支配边界中条目的总数。我们对计算出的集合的基数求和：\n$|DF(a)| = 0$\n$|DF(b)| = 1$\n$|DF(c)| = 3$\n$|DF(d)| = 2$\n$|DF(e)| = 2$\n$|DF(f)| = 1$\n$|DF(g)| = 3$\n$|DF(h)| = 1$\n$|DF(i)| = 2$\n$|DF(j)| = 0$\n\n$S = \\sum_{n \\in \\{a,..,j\\}} |DF(n)| = 0 + 1 + 3 + 2 + 2 + 1 + 3 + 1 + 2 + 0 = 15$。", "answer": "$$\n\\boxed{15}\n$$", "id": "3645154"}, {"introduction": "除了计算，理解支配关系如何随着程序变换而演变也至关重要。本练习引导你从计算转向概念推理，分析一种常见的编译器优化技术——关键边分裂（critical edge splitting）——对直接支配点的影响。通过这个思想实验，你将学会如何基于支配点的核心属性来预测和解释代码重构的后果，而不仅仅是机械地执行算法。[@problem_id:3645173]", "problem": "假设一个控制流图 (CFG) 是一个带有唯一入口节点的有向图，程序执行沿着图中的边所构成的路径进行。如果从入口节点到节点 $n$ 的每一条路径都包含节点 $d$，那么我们称节点 $d$ 支配节点 $n$。$n$ 的严格支配节点是一个满足 $d \\neq n$ 的支配节点 $d$。$n$ 的直接支配节点（记为 $idom(n)$）是 $n$ 的一个唯一的严格支配节点，该节点被 $n$ 的所有其他严格支配节点所支配，并且它自身也支配 $n$。如果一条边 $p \\to q$ 满足 $outdeg(p)  1$ 且 $indeg(q)  1$，则称其为关键边。考虑分裂一条关键边 $p \\to q$：插入一个新节点 $m$，使得原始边 $p \\to q$ 被两条边 $p \\to m$ 和 $m \\to q$ 替换，并且图中没有添加或删除其他边。生成的新节点 $m$ 只有一个前驱节点 $p$ 和一个后继节点 $q$。假设入口节点、可达性以及原始节点间的路径集合在插入 $m$ 后，除上述变化外均保持不变。\n\n根据上述基本定义，推断此边分裂操作对直接支配节点的影响。具体来说，确定在修改后的图中，$idom(m)$ 和 $idom(q)$ 相对于原始图中的值，它们之间的正确关系是什么。\n\n哪个选项是正确的？\n\nA. $idom(m) = p$ 且 $idom(q)$ 相对于分裂前的值保持不变。\n\nB. $idom(m) = p$ 且 $idom(q) = m$。\n\nC. $idom(m) = idom(p)$ 且 $idom(q)$ 相对于分裂前的值保持不变。\n\nD. $idom(m) = p$ 且 $idom(q) = p$，即使分裂前 $idom(q)$ 的值不同。\n\nE. $idom(m) = idom(q)$ 且 $idom(q)$ 相对于分裂前的值保持不变。", "solution": "### 解题推导\n\n设原始 CFG 为 $G = (V, E)$，修改后的 CFG 为 $G' = (V \\cup \\{m\\}, E')$，其中 $E' = (E \\setminus \\{p \\to q\\}) \\cup \\{p \\to m, m \\to q\\}$。设 $entry$ 为 CFG 的入口节点。\n\n#### 对 $\\mathrm{idom}(m)$ 的分析\n\n1.  根据问题中对边分裂操作的定义，新节点 $m$ 只有一个前驱节点 $p$。进入 $m$ 的唯一入边是 $p \\to m$。\n2.  考虑从 $entry$ 节点到 $m$ 的任意路径 $\\pi$。由于进入节点 $m$ 的唯一方式是通过边 $p \\to m$，因此任何这样的路径 $\\pi$ 的形式必然是 $entry \\to \\dots \\to p \\to m$。\n3.  这意味着节点 $p$ 存在于从 $entry$ 到 $m$ 的每一条路径上。\n4.  根据支配节点的定义，$p$ 支配 $m$。由于 $p$ 和 $m$ 是不同的节点，所以 $p$ 是 $m$ 的一个严格支配节点。\n5.  现在考虑 $m$ 的任何其他严格支配节点，我们称之为 $d$，其中 $d \\neq p$。由于 $d$ 必须在从 $entry$ 到 $m$ 的每一条路径上，而每一条这样的路径形式都为 $entry \\to \\dots \\to p \\to m$，因此 $d$ 必须位于从 $entry$ 到 $p$ 的子路径上。\n6.  这意味着 $m$ 的任何其他严格支配节点 $d$ 也必须支配 $p$。\n7.  因此，$m$ 的严格支配节点集合是 $\\{p\\} \\cup \\{p \\text{ 的严格支配节点}\\}$。\n8.  根据所给定义，$\\mathrm{idom}(m)$ 是 $m$ 的那个被所有其他 $m$ 的严格支配节点所支配的严格支配节点。节点 $p$ 满足这个条件：$m$ 的所有其他严格支配节点也是 $p$ 的支配节点。因此，$p$ 是 $m$ 的直接支配节点。\n9.  所以，我们得出结论 $\\mathrm{idom}(m) = p$。\n\n#### 对 $\\mathrm{idom}(q)$ 的分析\n\n让我们比较一下在原始图 $G$ 中 $q$ 的支配节点（我们称之为 $Dom_G(q)$）和在修改后的图 $G'$ 中 $q$ 的支配节点（我们称之为 $Dom_{G'}(q)$）。\n\n1.  **证明 $Dom_G(q) \\subseteq Dom_{G'}(q)$**：\n    设 $d$ 是 $G$ 中 $q$ 的一个支配节点。这意味着在 $G$ 中，从 $entry$ 到 $q$ 的每一条路径上都有 $d$。我们需要证明在 $G'$ 中，从 $entry$ 到 $q$ 的每一条路径上也有 $d$。\n    在 $G'$ 中，从 $entry$ 到 $q$ 的路径可以分为两种类型：\n    a) 一条不使用新节点 $m$ 的路径 $\\pi'$。这条路径必然存在于 $G$ 中，并且必然通过 $p$ 以外的前驱节点到达 $q$。由于 $d \\in Dom_G(q)$，$d$ 必须在这条路径 $\\pi'$ 上。\n    b) 一条使用新节点 $m$ 的路径 $\\pi''$。这条路径的形式必然是 $entry \\to \\dots \\to p \\to m \\to q$。该路径对应于原始图 $G$ 中的一条路径 $\\pi = entry \\to \\dots \\to p \\to q$。由于 $d \\in Dom_G(q)$，$d$ 必须在 $\\pi$ 上。因为 $d$ 是一个支配节点，我们可以假设 $d \\neq q$。因此 $d$ 必须位于子路径 $entry \\to \\dots \\to p$ 上。这意味着 $d$ 也存在于新路径 $\\pi''$ 上。\n    由于 $d$ 在 $G'$ 中所有到 $q$ 的路径上，所以 $d$ 是 $G'$ 中 $q$ 的一个支配节点。因此，$Dom_G(q) \\subseteq Dom_{G'}(q)$。\n\n2.  **证明 $Dom_{G'}(q) \\subseteq Dom_G(q)$**：\n    设 $d'$ 是 $G'$ 中 $q$ 的一个支配节点。我们需要证明在 $G$ 中，从 $entry$ 到 $q$ 的每一条路径上都有 $d'$。\n    首先，注意 $d'$ 不可能是新节点 $m$。这是因为边 $p \\to q$ 是关键边，意味着 $indeg(q)  1$。因此，在 $G$ 中，$q$ 至少存在另一个不同于 $p$ 的前驱节点 $u$。路径 $entry \\to \\dots \\to u \\to q$ 在 $G'$ 中仍然存在，并且不包含 $m$。由于 $d'$ 必须支配 $G'$ 中的 $q$，它就必须在这条路径上。因此，$d' \\neq m$。所以 $d'$ 是来自 $V$ 的原始节点之一。\n    现在考虑 $G$ 中从 $entry$ 到 $q$ 的任意路径 $\\pi$。\n    a) 如果 $\\pi$ 不使用边 $p \\to q$，它也存在于 $G'$ 中。由于 $d' \\in Dom_{G'}(q)$，$d'$ 必须在这条路径上。\n    b) 如果 $\\pi$ 使用边 $p \\to q$，它的形式为 $entry \\to \\dots \\to p \\to q$。在 $G'$ 中，这对应于路径 $\\pi' = entry \\to \\dots \\to p \\to m \\to q$。由于 $d' \\in Dom_{G'}(q)$，$d'$ 必须在 $\\pi'$ 上。因为 $d' \\neq m$，$d'$ 必须位于子路径 $entry \\to \\dots \\to p$ 上。因此，$d'$ 也在原始路径 $\\pi$ 上。\n    由于 $d'$ 在 $G$ 中所有到 $q$ 的路径上，所以 $d'$ 是 $G$ 中 $q$ 的一个支配节点。因此，$Dom_{G'}(q) \\subseteq Dom_G(q)$。\n\n3.  根据 (1) 和 (2)，我们得出结论 $Dom_G(q) = Dom_{G'}(q)$。边分裂操作不改变 $q$ 的支配节点集合。\n\n4.  直接支配节点 $\\mathrm{idom}(q)$ 被定义为 $q$ 的严格支配节点集合中的一个特定元素。这个选择是基于*支配节点之间的*支配关系。插入 $m$ 不会改变任意两个原始节点之间（不涉及被分裂的边 $p \\to q$）的路径，而那些确实涉及 $p \\to q$ 的路径被修改的方式也不会影响非 $m$ 节点之间的支配关系。因此，对于任意一对节点 $(x, y)$ 其中 $x, y \\in V$，支配关系被保留。\n5.  由于 $q$ 的支配节点集合相同，并且这些节点之间的支配关系没有改变，所以 $q$ 的直接支配节点也必然相同。\n\n**结论**：通过插入节点 $m$ 分裂关键边 $p \\to q$ 后，我们得到 $\\mathrm{idom}(m) = p$ 且 $\\mathrm{idom}(q)$ 与其在原始图中的值相比保持不变。\n\n### 逐项分析选项\n\n-   **A. $\\mathrm{idom}(m) = p$ 且 $\\mathrm{idom}(q)$ 相对于分裂前的值保持不变。**\n    这与我们推导出的结果相符。$\\mathrm{idom}(m) = p$ 因为 $p$ 是 $m$ 的唯一前驱节点。$\\mathrm{idom}(q)$ 保持不变是因为 $q$ 的支配节点集合以及它们之间的支配关系都得以保留。\n    **结论：正确。**\n\n-   **B. $\\mathrm{idom}(m) = p$ 且 $\\mathrm{idom}(q) = m$。**\n    第一部分，$\\mathrm{idom}(m) = p$，是正确的。第二部分，$\\mathrm{idom}(q) = m$，是错误的。要使 $m$ 成为 $\\mathrm{idom}(q)$，它必须首先支配 $q$。然而，由于原始边是关键边，$indeg(q)  1$。这意味着在原始图中，$q$ 至少有一个不同于 $p$ 的前驱节点 $u$。通过 $u$ 到达 $q$ 的路径在修改后的图中仍然存在，并且不包含 $m$。因此，$m$ 并不支配 $q$。\n    **结论：错误。**\n\n-   **C. $\\mathrm{idom}(m) = \\mathrm{idom}(p)$ 且 $\\mathrm{idom}(q)$ 相对于分裂前的值保持不变。**\n    第一部分，$\\mathrm{idom}(m) = \\mathrm{idom}(p)$，是错误的。我们证明了 $\\mathrm{idom}(m) = p$。通常情况下，$p \\neq \\mathrm{idom}(p)$。\n    **结论：错误。**\n\n-   **D. $\\mathrm{idom}(m) = p$ 且 $\\mathrm{idom}(q) = p$，即使分裂前 $\\mathrm{idom}(q)$ 的值不同。**\n    第一部分，$\\mathrm{idom}(m) = p$，是正确的。第二部分，即 $\\mathrm{idom}(q)$ 变为 $p$，是错误的。如选项B的分析所示，可能存在不包含 $p$ 的到达 $q$ 的路径。因此，在修改后的图中，$p$ 不一定支配 $q$，因此在一般情况下不能成为其直接支配节点。我们的详细分析表明 $\\mathrm{idom}(q)$ 保持不变。\n    **结论：错误。**\n\n-   **E. $\\mathrm{idom}(m) = \\mathrm{idom}(q)$ 且 $\\mathrm{idom}(q)$ 相对于分裂前的值保持不变。**\n    第二部分，$\\mathrm{idom}(q)$ 保持不变，是正确的。第一部分声称 $\\mathrm{idom}(m) = \\mathrm{idom}(q)$。由于我们知道 $\\mathrm{idom}(m) = p$，这个陈述等价于声称分裂后 $p = \\mathrm{idom}(q)$。又因为 $\\mathrm{idom}(q)$ 不变，这意味着分裂前 $p$ 必须是 $\\mathrm{idom}(q)$。这在一般情况下是不成立的。\n    **结论：错误。**", "answer": "$$\\boxed{A}$$", "id": "3645173"}]}